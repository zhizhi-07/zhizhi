# 论坛功能 - 使用手册

## 🎯 快速开始

### 访问论坛

1. 启动项目后，访问 `http://localhost:3001/zhizhi/`
2. 进入桌面页面
3. **向左滑动**到第二页
4. 点击**"论坛"**图标（方格图标）

---

## 📱 功能说明

### 1. 论坛主页

#### 顶部区域（橙色渐变）
```
┌─────────────────────────────┐
│ [←] 🔍 搜索你感兴趣的内容  [+] │  ← 导航栏
│ [首页] 关注 推荐 ... 更多▼   │  ← Tab切换
└─────────────────────────────┘
```

**功能按钮**：
- **←** - 返回桌面
- **🔍** - 打开搜索
- **+** - 发布帖子
- **首页/关注/推荐** - 切换内容源
- **更多** - 更多选项（待实现）

#### 帖子列表

每个帖子包含：
- **头像** - 点击可查看用户（待接入用户系统）
- **用户名** + 认证标识⭐
- **发布时间** - "1小时前" 格式
- **地点** - 北京·朝阳区
- **内容** - 文字内容
- **话题标签** - 蓝色可点击（待实现话题页）
- **图片** - 最多9张，自适应布局
- **互动栏**：
  - **↻** 转发（待实现）
  - **💬** 评论（点击查看详情）
  - **❤** 点赞（立即响应）

#### 底部导航

```
┌─────────────────────────────┐
│ 🏠  📹  (  +  )  💬  👤    │
│首页 视频  发布   消息  我    │
└─────────────────────────────┘
```

- **🏠 首页** - 当前页（橙色高亮）
- **📹 视频** - 视频页面（待实现）
- **( + ) 发布** - 发帖（橙色圆形凸起）
- **💬 消息** - 消息页面（待实现）
- **👤 我** - 个人中心（待实现）

---

### 2. 发帖页面

点击右上角 **+** 或底部 **发布** 按钮

#### 界面布局

```
┌─────────────────────────────┐
│ 取消      发微博      [发布] │  ← 顶部
├─────────────────────────────┤
│ 分享新鲜事...              │  ← 文字输入
│                             │
│ [图片预览网格]              │  ← 图片区域
│                             │
│ #话题标签#                  │  ← 话题显示
│                             │
│ 📍 北京·朝阳区              │  ← 地点显示
├─────────────────────────────┤
│ 📷  #️⃣  📍  💾             │  ← 工具栏
│图片 话题 位置 草稿           │
└─────────────────────────────┘
```

#### 操作步骤

1. **输入内容**
   - 点击输入框
   - 输入文字（支持多行）
   - 可以使用Emoji

2. **添加图片**
   - 点击📷图片按钮
   - 选择图片（最多9张）
   - 预览图片
   - 点击×删除不要的图片

3. **添加话题**
   - 点击 #️⃣ 话题按钮
   - 弹窗输入话题名
   - 点击确定添加
   - 可以添加多个话题

4. **添加位置**
   - 点击📍位置按钮
   - 显示当前位置（模拟）
   - 点击×删除位置

5. **发布/草稿**
   - 点击右上角**发布**按钮
   - 或点击💾**草稿**保存
   - 返回时提示保存草稿

---

### 3. 帖子详情页

点击帖子的💬评论按钮

#### 界面布局

```
┌─────────────────────────────┐
│ [←]      详情        [⋮]    │  ← 顶部
├─────────────────────────────┤
│ 😊 用户名 ⭐                │
│    1小时前 · 北京            │
│    帖子完整内容...           │
│    #话题#                   │
│    [图片网格]               │
│    1.2k 赞 · 156 评论 · 89 转发 │
├─────────────────────────────┤
│ 评论 156                    │  ← 评论列表
│                             │
│ 😊 评论者                   │
│    评论内容...              │
│    2小时前  回复  128赞      │
├─────────────────────────────┤
│ [说点什么...]          ❤    │  ← 底部工具栏
└─────────────────────────────┘
```

#### 功能

1. **查看完整帖子**
   - 完整内容
   - 所有图片
   - 互动数据统计

2. **评论互动**
   - 点击输入框发评论
   - 点击"回复"回复评论
   - 显示@用户名
   - 支持嵌套回复

3. **点赞**
   - 右下角❤按钮
   - 点击切换状态
   - 立即响应

---

### 4. 搜索页面

点击顶部🔍搜索按钮

#### 界面布局

```
┌─────────────────────────────┐
│ [←] [🔍 搜索框  ×]  [搜索]  │  ← 顶部
├─────────────────────────────┤
│ 搜索历史              清空   │
│ [关键词1 ×] [关键词2 ×]     │
├─────────────────────────────┤
│ 热门话题                    │
│ 1️⃣ #微博热搜  12.8w讨论    │
│ 2️⃣ #今日话题  8.5w讨论     │
│ 3️⃣ #科技资讯  6.2w讨论     │
└─────────────────────────────┘
```

#### 功能

1. **搜索历史**
   - 显示最近10条
   - 点击重新搜索
   - 点击×删除单条
   - 点击清空全部

2. **热门话题**
   - 前3名橙色高亮
   - 显示讨论数
   - 点击搜索话题

3. **搜索结果**
   - Tab切换：帖子/话题/用户
   - 显示相关内容
   - 点击查看详情

---

## 🎨 操作指南

### 基础操作

#### 点赞
1. 找到帖子的❤图标
2. 点击一次→点赞（变橙色，数字+1）
3. 再点击一次→取消（变灰色，数字-1）
4. 状态会自动保存

#### 评论
1. 点击帖子的💬图标
2. 进入详情页
3. 点击底部输入框
4. 输入内容
5. 点击发送
6. 评论显示在列表

#### 回复评论
1. 在详情页找到评论
2. 点击"回复"
3. 输入框显示@用户名
4. 输入内容
5. 点击发送

#### 发帖
1. 点击+按钮
2. 输入内容
3. 可选：添加图片
4. 可选：添加话题
5. 可选：添加位置
6. 点击发布

#### 保存草稿
1. 在发帖页面
2. 输入部分内容
3. 点击💾草稿按钮
4. 或点击返回时提示保存

---

## 💡 使用技巧

### 快速操作

1. **快速发帖**
   - 双击底部发布按钮
   - 直接进入发帖页

2. **快速搜索**
   - 点击搜索框
   - 选择历史记录

3. **快速回复**
   - 长按评论（待实现）
   - 快速回复

### 键盘快捷键

- **Enter** - 发送评论
- **Esc** - 关闭弹窗
- **Ctrl+Enter** - 发布帖子（待实现）

---

## 🐛 已知问题和限制

### 当前限制

1. **转发功能** - 仅有UI骨架，功能待实现
2. **视频功能** - 类型已预留，UI待实现
3. **用户系统** - 需要集成现有UserContext
4. **通知系统** - 类型已定义，功能待实现
5. **图片上传** - 目前只支持本地预览
6. **数据同步** - 目前只存localStorage，不支持多设备

### 后续优化

1. **性能优化**
   - 长列表虚拟滚动
   - 图片懒加载
   - 请求防抖

2. **用户体验**
   - 下拉刷新
   - 上拉加载更多
   - 加载骨架屏
   - 错误重试

3. **功能完善**
   - 私信功能
   - @提醒
   - 表情包
   - 长图文

---

## 🎓 学习路径

### 新手入门

1. **查看代码**
   - 从 `Forum.tsx` 开始
   - 理解组件结构
   - 查看类型定义

2. **尝试修改**
   - 修改模拟数据
   - 调整样式
   - 添加简单功能

3. **查看文档**
   - 快速开始指南
   - 开发维护指南
   - 完整架构文档

### 进阶开发

1. **理解架构**
   - 三层架构设计
   - 数据流转过程
   - Context使用方式

2. **添加功能**
   - 按照规范添加新功能
   - 编写测试用例
   - 更新文档

3. **性能优化**
   - 使用Chrome DevTools
   - 分析性能瓶颈
   - 实施优化方案

---

## 📊 数据说明

### 模拟数据

系统自动生成5条模拟帖子：
- 思思考考（认证用户）- 1小时前
- 科技达人（认证用户）- 2小时前
- 美食探店 - 3小时前
- 旅行日记（认证用户）- 4小时前
- 音乐分享 - 5小时前

### 清空数据

打开浏览器控制台：
```javascript
localStorage.removeItem('forum_posts')
localStorage.removeItem('forum_comments')
// 或
localStorage.clear()
```

刷新页面后会重新生成模拟数据。

---

## 🔍 常见问题

### Q: 如何查看我的发帖？
A: 目前发布后会显示在列表顶部。后续会添加"我的"页面。

### Q: 草稿保存在哪里？
A: 保存在 localStorage 的 `forum_drafts` 中。后续会添加草稿箱页面。

### Q: 如何删除帖子？
A: 点击帖子右上角⋮按钮（功能待实现）。

### Q: 评论可以删除吗？
A: 可以，在评论右侧有删除按钮（需要是自己的评论）。

### Q: 数据会同步吗？
A: 目前只保存在本地localStorage，不支持云端同步。

### Q: 支持哪些图片格式？
A: JPG、PNG、GIF、WebP等常见格式。

### Q: 图片有大小限制吗？
A: 目前无限制，建议每张图片 < 5MB。

### Q: 话题如何使用？
A: 点击话题标签可以查看话题下的所有帖子（功能待实现）。

---

## 🎨 自定义配置

### 修改主题色

全局搜索并替换：
- `#ff6c00` - 主橙色
- `#ff8140` - 渐变起始色

### 修改Tab标签

编辑 `src/pages/Forum.tsx`:
```typescript
const tabs = [
  { key: 'recommend' as ForumTab, label: '推荐' },  // 改为推荐
  { key: 'following' as ForumTab, label: '关注' },
  { key: 'hot' as ForumTab, label: '热门' }
]
```

### 修改底部导航

编辑 `src/pages/Forum.tsx` 的 `renderBottomNav()` 函数。

---

## 📖 相关文档

1. **论坛功能-最终完成报告.md** - 完整成果总结
2. **论坛功能-完整架构文档.md** - 架构设计详解
3. **论坛功能-开发维护指南.md** - 开发规范和维护
4. **论坛功能-快速开始.md** - 快速上手
5. **论坛功能-使用手册.md** - 本文档

---

## 🎉 开始使用

现在就刷新浏览器，体验你的沉浸式论坛吧！🚀

有任何问题，请查看上述文档或检查代码注释。


