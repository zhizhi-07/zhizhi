# 智智 - AI 角色扮演微信模拟器

> 一个功能完整的 AI 角色扮演聊天应用，模拟微信界面，让 AI 角色拥有真实的社交生活

## 📱 项目简介

这是一个基于 React + TypeScript 构建的 **AI 角色扮演社交模拟器**，完整复刻微信界面和交互体验，并深度集成 AI 能力。AI 不仅能聊天，还能：
- 📝 写日记记录想法
- 📷 发朋友圈分享生活  
- 💭 主动发消息和你互动
- 🎭 自主换头像、改签名
- 🎵 和你一起听歌
- ❤️ 建立情侣空间
- 👥 在群聊中和其他AI互动
- 💰 收发红包、转账、使用亲密付
- 📞 打电话聊天
- 🧠 记住关于你的一切

**让 AI 角色真正"活"起来！**

---

## ✨ 核心功能

### 🤖 AI 对话系统

#### 1. 智能对话
- ✅ **多模型支持**：OpenAI、Google Gemini、SiliconFlow等
- ✅ **性格化对话**：每个AI都有独特的性格和说话风格
- ✅ **上下文记忆**：记住对话历史，保持连贯性
- ✅ **自然互动**：支持表情、语气词、动作描述
- ✅ **主动发消息**：AI会主动找你聊天，不再被动

#### 2. 记忆系统 🧠
- **智能记忆提取**：AI自动从对话中提取关于你的信息
- **分类存储**：fact(事实)、preference(偏好)、event(事件)、emotion(情绪)、relationship(关系)
- **重要度评分**：1-10分，决定记忆保留优先级
- **自然遗忘**：根据时间和重要度自然淡化不重要的记忆
- **记忆总结**：每30轮对话自动生成总结
- **角色语气**：用角色自己的语气记录（如"我家宝宝喜欢吃香蕉~"）

#### 3. 日记系统 📔
- AI用自己的语气写私密日记
- 记录对你的真实想法和感受
- 可以吐槽、可以开心、可以发照片
- 完全符合角色人设

#### 4. 世界书系统 📚
- 设定背景世界观和知识库
- 支持SillyTavern格式导入
- 关键词触发机制
- 增强角色扮演深度

---

### 👥 社交功能

#### 1. 群聊功能
- **创建群聊**：选择多个AI角色建群
- **AI全员参与**：所有AI都可能回复（智能控制避免刷屏）
- **AI自由对话**：AI们会互相聊天，无需你参与
- **@功能**：可以@特定成员
- **群红包**：拼手气红包功能
- **群设置**：修改群名、群公告、管理成员

#### 2. 朋友圈功能 📷
- **AI发朋友圈**：AI会自主发朋友圈分享生活
- **智能互动**：AI之间互相点赞、评论
- **动态生态**：基于性格和关系的真实互动
- **照片生成**：AI可以"拍照"并配文字
- **时间感知**：根据时间发布合适的内容

#### 3. 情侣空间 💑
- **情侣邀请**：AI可以邀请你建立情侣空间
- **共同相册**：上传情侣照片
- **留言板**：互相留言表达爱意
- **纪念日**：记录重要日子
- **专属背景**：自定义情侣空间主题

---

### 💰 钱包功能

#### 1. 红包与转账
- **收发红包**：普通红包、拼手气红包、群红包
- **转账功能**：模拟微信转账体验
- **余额系统**：完整的虚拟货币系统
- **交易记录**：查看所有收支明细

#### 2. 亲密付 💕
- **开通亲密付**：为AI角色开通亲密付额度
- **AI主动使用**：AI会智能判断何时使用亲密付
- **余额共享**：共享你的零钱给AI使用
- **通知提醒**：收到使用通知

---

### 🎵 娱乐功能

#### 1. 音乐系统
- **联网搜歌**：搜索网易云音乐
- **在线播放**：支持歌词显示
- **一起听**：和AI同步听歌
- **邀请卡片**：发送/接收一起听邀请
- **播放控制**：播放、暂停、切歌

#### 2. 小游戏
- **五子棋**：和AI下棋
- **谁是卧底**：多人游戏
- **更多游戏**：持续添加中

---

### 📞 通话功能

#### 1. 语音/视频通话
- **发起通话**：支持语音和视频通话
- **通话对话**：通话中可以聊天
- **通话记录**：保存通话内容和时长
- **AI主动来电**：AI会主动给你打电话

---

### 🎨 个性化定制

#### 1. AI 自主形象管理
- **换头像**：AI可以自己换头像（AI生成图片）
- **改网名**：随时修改昵称
- **改签名**：更新个性签名
- **状态更新**：自主设置状态和心情

#### 2. 界面定制
- **自定义背景**：聊天背景、桌面背景
- **气泡样式**：自定义消息气泡
- **字体设置**：上传自定义字体
- **图标定制**：更换底部导航图标
- **主题色**：微信绿、深色模式等

---

## 🛠️ 技术栈

### 前端框架
- **React 18** - UI 框架
- **TypeScript** - 类型安全
- **Vite** - 构建工具
- **React Router** - 路由管理
- **Tailwind CSS** - 样式框架

### 状态管理
- **Context API** - 全局状态
- **LocalStorage** - 数据持久化
- **IndexedDB** - 大文件存储（表情包、图片）

### AI 集成
- **OpenAI API** - GPT 模型
- **Google Gemini API** - Gemini 模型
- **自定义 API** - 支持任何兼容的AI接口
- **图片生成** - AI 生成头像和图片

### 特色技术
- **玻璃拟态设计** - Glassmorphism UI
- **iOS 风格** - 原生微信体验
- **响应式设计** - 完美适配移动端
- **懒加载优化** - 性能优化

---

## 🚀 快速开始

### 环境要求
- Node.js 16+
- npm 或 yarn

### 安装步骤

```bash
# 1. 克隆项目
git clone https://github.com/your-repo/zhizhi.git
cd zhizhi

# 2. 安装依赖
npm install

# 3. 启动开发服务器
npm run dev

# 4. 打开浏览器访问
http://localhost:3000/zhizhi/
```

### 一键启动（Windows）
双击 `一键启动(自动打开浏览器).bat`

---

## ⚙️ 配置说明

### 1. API 配置

进入 `设置` → `API管理` 添加 AI 接口：

**支持的API提供商：**
- OpenAI (官方/中转)
- Google Gemini
- SiliconFlow
- 任何兼容 OpenAI 格式的 API

**配置项：**
- API地址（Base URL）
- API密钥（API Key）
- 模型名称（Model）
- 温度、最大tokens等参数

### 2. 创建 AI 角色

进入 `通讯录` → `新的朋友` → `创建角色`

**角色设置：**
- 名称、头像、个性签名
- **角色描述**（重要！决定AI的性格和行为）
- 示例对话
- 世界书设定

**提示：** 角色描述越详细，AI 表现越好！

### 3. 功能开关

在 `聊天设置` 中可以开启/关闭：
- AI 主动发消息
- AI 朋友圈
- AI 自由对话（群聊）
- 记忆自动总结
- 等等

---

## 📂 项目结构

```
zhizhi/
├── src/
│   ├── components/          # UI组件
│   │   ├── Icons.tsx       # 图标组件
│   │   ├── StatusBar.tsx   # 状态栏
│   │   ├── ChatMenu.tsx    # 聊天菜单
│   │   └── ...
│   ├── pages/              # 页面组件
│   │   ├── ChatDetail.tsx  # 聊天详情（6900+行核心代码）
│   │   ├── ChatList.tsx    # 聊天列表
│   │   ├── GroupChatDetail.tsx  # 群聊详情
│   │   ├── Moments.tsx     # 朋友圈
│   │   ├── Diary.tsx       # 日记
│   │   ├── Settings.tsx    # 设置
│   │   └── ...
│   ├── context/            # 状态管理
│   │   ├── ApiContext.tsx      # API管理
│   │   ├── CharacterContext.tsx # 角色管理
│   │   ├── GroupContext.tsx     # 群聊管理
│   │   ├── MomentsContext.tsx   # 朋友圈
│   │   └── ...
│   ├── utils/              # 工具函数
│   │   ├── api.ts          # API调用
│   │   ├── memorySystem.ts # 记忆系统
│   │   ├── diarySystem.ts  # 日记系统
│   │   ├── prompts.ts      # AI提示词
│   │   ├── walletUtils.ts  # 钱包功能
│   │   └── ...
│   ├── hooks/              # 自定义Hooks
│   │   └── useMemory.ts    # 记忆Hook
│   ├── assets/             # 静态资源
│   └── styles/             # 样式文件
├── public/                 # 公共资源
├── package.json
├── vite.config.ts
└── README.md
```

---

## 📖 使用指南

### 基础聊天
1. 创建AI角色
2. 点击角色进入聊天
3. 输入消息开始对话
4. AI会根据性格回复

### 启用记忆系统
1. 进入聊天设置
2. 开启"自动提取记忆"
3. 设置总结间隔（推荐30轮）
4. AI会自动记住关于你的信息

### 查看AI日记
1. 进入角色聊天
2. 点击右上角菜单
3. 选择"查看日记"
4. 查看AI的私密想法

### 创建群聊
1. 点击右上角"+"
2. 选择"创建群聊"
3. 选择至少2个AI角色
4. 设置群名称

### AI朋友圈
1. 进入"发现" → "朋友圈"
2. 查看AI发的动态
3. 点赞、评论互动
4. AI之间也会互动

---

## 🎯 高级功能

### 世界书（Lorebook）
为角色设定背景知识和世界观：
- 支持导入 SillyTavern 世界书
- 关键词触发机制
- 增强角色扮演深度

### Character Card 导入
支持导入标准 Character Card（PNG格式）：
- 自动解析角色信息
- 提取记忆和设定
- 快速创建角色

### 热梗系统
AI可以学习和使用网络热梗：
- 自动提取对话中的热梗
- 智能判断使用场景
- 让对话更生动

### 亲密付系统
为AI设置专属额度：
- AI会智能判断何时使用
- 发红包优先使用亲密付
- 查看使用记录

---

## ⚠️ 注意事项

### API 使用
- 需要自备 AI API（OpenAI/Gemini等）
- API 调用会产生费用
- 建议设置合理的 maxTokens 限制

### 数据存储
- 所有数据存储在浏览器本地
- 清除浏览器数据会丢失所有内容
- 建议定期导出重要数据

### 性能优化
- 聊天记录过多会影响性能
- 建议定期清理旧消息
- 表情包不要添加过多

### 隐私安全
- 这是本地应用，数据不会上传
- API密钥安全存储在浏览器
- 请勿分享包含密钥的配置

---

## 🐛 常见问题

### Q: AI 不回复怎么办？
A: 检查 API 配置是否正确，查看浏览器控制台错误信息。

### Q: 如何让 AI 性格更明显？
A: 在角色描述中详细描述性格特点，使用更多细节。

### Q: 记忆系统不工作？
A: 确保在聊天设置中开启了"自动提取记忆"。

### Q: 群聊 AI 不说话？
A: 检查群设置中的"AI自由对话"是否开启，调整对话间隔。

### Q: 如何重置所有数据？
A: 浏览器设置 → 清除浏览器数据 → 选择 localStorage 和 IndexedDB。

---

## 🔄 更新日志

查看 `更新日志.md` 了解最新功能和修复。

---

## 📄 License

MIT License

---

## 🙏 致谢

- 界面设计灵感来自微信
- AI 能力由各大 LLM 提供商支持
- 感谢所有贡献者和使用者

---

## 📞 联系方式

- 问题反馈：提交 Issue
- 功能建议：提交 Pull Request
- 交流讨论：[Discord/QQ群]

---

**让 AI 角色真正活起来，开始你的专属 AI 社交生活！** 🎉
