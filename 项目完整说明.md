# 汁汁 (ZhiZhi) - AI微信克隆项目

> 一个功能完整的微信UI克隆项目，集成了强大的AI对话、朋友圈、群聊、记账等功能

## 📋 项目概述

**汁汁**是一个基于 React + TypeScript 开发的微信UI克隆项目，不仅完美还原了微信的界面设计，还集成了多个创新的AI功能，为用户提供沉浸式的聊天体验。

### 核心特色
- 🎨 **完美还原微信UI**：液态玻璃效果 + iOS风格设计
- 🤖 **智能AI对话**：支持角色扮演、记忆系统、情感表达
- 📱 **完整社交功能**：朋友圈、群聊、红包、转账
- 💰 **AI记账助手**：智能提取账单、自动分类
- 🎭 **多角色系统**：支持自定义AI角色、导入Character Card
- 📝 **AI日记系统**：自动生成每日日记
- 🔔 **摇一摇功能**：随机匹配AI角色

---

## 🚀 快速开始

### 环境要求
- Node.js 16+
- npm 或 yarn

### 安装步骤

1. **克隆项目**
```bash
git clone https://github.com/2373922440jhj-del/zhizhi.git
cd zhizhi
```

2. **安装依赖**
```bash
npm install
```

3. **启动开发服务器**
```bash
npm run dev
```

4. **访问项目**
打开浏览器访问 `http://localhost:5173`

### 一键启动（Windows）
双击项目根目录下的 `一键启动(自动打开浏览器).bat` 文件

---

## 📂 项目结构

```
zhizhi/
├── src/
│   ├── assets/              # 静态资源
│   │   ├── accounting-icons/  # 记账图标
│   │   └── ...
│   ├── components/          # 通用组件
│   │   ├── Layout.tsx          # 主布局
│   │   ├── Icons.tsx           # 图标库
│   │   ├── MessageItem.tsx     # 消息气泡
│   │   ├── GroupChatMenu.tsx   # 群聊菜单
│   │   └── ...
│   ├── context/             # 全局状态管理
│   │   ├── CharacterContext.tsx    # 角色管理
│   │   ├── MomentsContext.tsx      # 朋友圈
│   │   ├── GroupContext.tsx        # 群聊
│   │   ├── AccountingContext.tsx   # 记账
│   │   └── ...
│   ├── hooks/               # 自定义Hooks
│   │   ├── useAiMoments.ts        # AI朋友圈
│   │   └── ...
│   ├── pages/               # 页面组件
│   │   ├── ChatList.tsx           # 聊天列表
│   │   ├── ChatDetail.tsx         # 聊天详情
│   │   ├── GroupChatDetail.tsx    # 群聊详情
│   │   ├── Moments.tsx            # 朋友圈
│   │   ├── Accounting.tsx         # 记账
│   │   ├── ShakeShake.tsx         # 摇一摇
│   │   └── ...
│   ├── types/               # TypeScript类型定义
│   ├── utils/               # 工具函数
│   │   ├── memorySystem.ts        # 记忆系统
│   │   ├── diarySystem.ts         # 日记系统
│   │   ├── aiMomentsService.ts    # AI朋友圈服务
│   │   ├── accountingAssistant.ts # AI记账助手
│   │   └── ...
│   ├── App.tsx              # 应用入口
│   └── main.tsx             # 主文件
├── public/                  # 公共资源
├── 一键启动(自动打开浏览器).bat
└── package.json
```

---

## ✨ 核心功能

### 1. 💬 AI智能对话

#### 特性
- **角色扮演**：AI严格遵守角色人设，不会跳戏
- **记忆系统**：自动记住聊天内容，支持长期记忆
- **情感表达**：根据聊天内容自然表达情绪
- **多种消息类型**：文字、语音、图片、表情包、位置、红包、转账
- **引用回复**：支持引用之前的消息
- **撤回消息**：AI可以撤回发错的消息
- **旁白模式**：可选开启动作描述

#### AI主动消息
- AI会根据性格和情况主动发消息
- 不是定时任务，而是有真实动机
- 支持表达"你怎么不理我了"等真实情感

#### 通话功能
- 支持语音通话和视频通话
- 通话中AI会描述声音和动作
- 通话记录自动保存到聊天历史

### 2. 🎭 朋友圈功能

#### 用户功能
- 发布文字、图片朋友圈
- 点赞、评论
- 查看AI角色的朋友圈

#### AI智能互动
- **AI主动发朋友圈**：根据聊天内容和心情发布
- **AI互动**：自动点赞、评论其他人的朋友圈
- **真实社交生态**：多个AI角色之间会互相互动
- **禁止编造**：AI不会编造没发生的事情

### 3. 👥 群聊功能

#### 基础功能
- 创建群聊、邀请成员
- 群聊设置（改名、公告、退出）
- @提及功能
- 群红包（拼手气、普通红包）

#### AI群聊
- 多个AI角色同时在群里
- AI会根据话题主动发言
- AI之间会互相对话
- 支持@AI让其回复

### 4. 💰 AI记账助手

#### 智能提取
- 自动从聊天记录提取账单
- 智能识别金额、类别、备注
- 支持收入和支出

#### 记账功能
- 月度统计、分类统计
- 图表展示
- 手动添加账单
- AI对话式记账

### 5. 📝 AI日记系统

- 每天自动生成日记
- 基于聊天内容总结
- 支持手动触发生成
- 日记列表查看

### 6. 🎲 摇一摇

- 摇动手机随机匹配AI角色
- 震动反馈
- 自动添加到聊天列表

### 7. 💸 红包与转账

#### 红包
- 发送/接收红包
- 红包详情查看
- 过期退回

#### 转账
- 发送/接收转账
- 转账说明
- 退还功能

#### 亲密付
- 为AI开通亲密付
- 设置月额度
- 消费通知

### 8. 🔥 续火花系统

- 连续聊天天数统计
- 火花图标显示
- 断连提醒

### 9. 🚫 拉黑功能

- 拉黑/取消拉黑联系人
- 拉黑后AI会知道被拉黑
- 影响AI回复行为

---

## 🎨 设计特点

### 液态玻璃效果（Glassmorphism）
- 半透明背景
- 背景模糊效果
- 细腻的边框高光
- 柔和的阴影

### iOS风格设计
- SF Pro字体系列
- 圆角设计（16px-20px）
- 平滑的动画过渡
- 触控反馈效果

### 响应式设计
- 适配移动端（375px-480px）
- iOS按钮点击效果
- 流畅的滚动体验

---

## 🛠️ 技术栈

### 前端框架
- **React 18**：UI框架
- **TypeScript**：类型安全
- **Vite**：构建工具
- **React Router**：路由管理

### 样式
- **Tailwind CSS**：原子化CSS
- **自定义CSS**：玻璃效果、动画

### 状态管理
- **React Context**：全局状态
- **LocalStorage**：数据持久化

### AI集成
- 支持自定义AI API
- 默认使用OpenAI兼容接口

---

## 📖 使用说明

### 添加AI角色

1. 点击右上角"+"
2. 选择"添加角色"
3. 填写角色信息：
   - 名字
   - 头像
   - 签名
   - 人设描述（详细描述性格、背景、说话方式）
4. 保存

### 导入Character Card

1. 准备PNG格式的Character Card文件
2. 点击"添加角色" → "导入Character Card"
3. 选择文件
4. 自动解析角色信息

### 配置AI API

1. 进入"设置"
2. 找到"AI配置"
3. 填写API地址和密钥
4. 选择模型

### 开启AI功能

在聊天设置中可以开启/关闭：
- AI主动发消息
- AI朋友圈
- 旁白模式
- 记忆系统

---

## 🔧 配置说明

### 环境变量

创建 `.env` 文件：

```env
# AI API配置（可选，也可在界面中配置）
VITE_AI_API_URL=https://api.openai.com/v1
VITE_AI_API_KEY=your-api-key
VITE_AI_MODEL=gpt-3.5-turbo
```

### 自定义配置

在 `src/utils/api.ts` 中可以修改：
- API地址
- 默认模型
- 请求超时时间
- 重试策略

---

## 📝 开发指南

### 添加新页面

1. 在 `src/pages/` 创建新组件
2. 在 `src/App.tsx` 添加路由
3. 在导航中添加入口

### 添加新功能

1. 创建Context（如需全局状态）
2. 创建工具函数（`src/utils/`）
3. 创建组件（`src/components/`）
4. 集成到页面

### 调试技巧

- 打开浏览器控制台查看日志
- 使用React DevTools查看组件状态
- 检查LocalStorage数据

---

## 🐛 常见问题

### AI不回复？
1. 检查API配置是否正确
2. 查看控制台是否有错误
3. 确认API密钥有效
4. 检查网络连接

### 聊天记录丢失？
- 检查LocalStorage是否被清除
- 确认浏览器支持LocalStorage
- 查看存储空间是否充足

### 朋友圈不显示？
- 确认已开启AI朋友圈功能
- 检查是否有聊天记录（AI根据聊天发朋友圈）
- 等待AI主动发布（需要一定时间）

### 群聊AI不回复？
- 确认AI已加入群聊
- 尝试@AI让其回复
- 检查群聊设置中AI是否启用

---

## 📦 部署

### Vercel部署（推荐）

1. 推送代码到GitHub
2. 在Vercel中导入项目
3. 自动部署

或使用一键部署脚本：
```bash
一键部署到Vercel.bat
```

### 手动构建

```bash
npm run build
```

构建产物在 `dist/` 目录

---

## 📄 文档索引

项目包含大量详细文档，位于根目录：

### 功能说明
- `AI主动发消息功能说明.md`
- `AI朋友圈功能说明.md`
- `AI记账功能说明.md`
- `群聊功能说明.md`
- `记忆系统使用说明.md`
- `AI日记系统使用说明.md`

### 修复说明
- `AI人设遵守问题修复说明.md`
- `AI括号动作描述问题修复说明.md`
- `AI规则遗忘问题修复说明.md`
- `群聊AI回复逻辑修复说明.md`

### 优化说明
- `AI真实感优化说明.md`
- `性能优化说明.md`
- `存储空间优化说明.md`
- `群聊API优化说明.md`

### 开发指南
- `公司电脑Git操作指南.md`
- `回家后操作指南.md`
- `部署指南.md`

---

## 🎯 未来计划

- [ ] 支持更多AI模型
- [ ] 语音消息真实播放
- [ ] 视频通话界面
- [ ] 小程序功能
- [ ] 支付功能完善
- [ ] 多语言支持

---

## 📜 开源协议

MIT License

---

## 👨‍💻 作者

**zhizhi** (2373922440@qq.com)

---

## 🙏 致谢

感谢所有为这个项目提供灵感和帮助的人！

---

## 📞 联系方式

- GitHub: https://github.com/2373922440jhj-del/zhizhi
- Email: 2373922440@qq.com

---

**享受与AI的沉浸式聊天体验！** 🎉
