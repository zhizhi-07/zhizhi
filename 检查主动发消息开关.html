<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>æ£€æŸ¥ä¸»åŠ¨å‘æ¶ˆæ¯å¼€å…³</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 800px;
      margin: 0 auto;
    }
    .result {
      margin: 20px 0;
      padding: 15px;
      border-radius: 8px;
      background: #f5f5f5;
    }
    .enabled {
      background: #d4edda;
      color: #155724;
    }
    .disabled {
      background: #f8d7da;
      color: #721c24;
    }
    button {
      padding: 10px 20px;
      margin: 5px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background: #007bff;
      color: white;
    }
    button:hover {
      background: #0056b3;
    }
  </style>
</head>
<body>
  <h1>ğŸ” æ£€æŸ¥ AI ä¸»åŠ¨å‘æ¶ˆæ¯å¼€å…³</h1>
  
  <div id="results"></div>
  
  <h2>æ“ä½œ</h2>
  <button onclick="checkAll()">åˆ·æ–°æ£€æŸ¥</button>
  <button onclick="enableAll()">å…¨éƒ¨å¼€å¯</button>
  <button onclick="disableAll()">å…¨éƒ¨å…³é—­</button>
  
  <script>
    function checkAll() {
      const results = document.getElementById('results');
      results.innerHTML = '<h2>æ£€æŸ¥ç»“æœï¼š</h2>';
      
      // è·å–æ‰€æœ‰ç›¸å…³çš„ localStorage é”®
      const keys = Object.keys(localStorage);
      const proactiveKeys = keys.filter(k => k.includes('ai_proactive_enabled_'));
      
      if (proactiveKeys.length === 0) {
        results.innerHTML += '<div class="result disabled">âŒ æ²¡æœ‰æ‰¾åˆ°ä»»ä½•è§’è‰²çš„ä¸»åŠ¨å‘æ¶ˆæ¯è®¾ç½®</div>';
        return;
      }
      
      proactiveKeys.forEach(key => {
        const characterId = key.replace('ai_proactive_enabled_', '');
        const enabled = localStorage.getItem(key) === 'true';
        const className = enabled ? 'enabled' : 'disabled';
        const icon = enabled ? 'âœ…' : 'âŒ';
        
        results.innerHTML += `
          <div class="result ${className}">
            ${icon} è§’è‰² ID: ${characterId}<br>
            çŠ¶æ€: ${enabled ? 'å·²å¼€å¯' : 'æœªå¼€å¯'}<br>
            <button onclick="toggle('${key}')">åˆ‡æ¢</button>
          </div>
        `;
      });
    }
    
    function toggle(key) {
      const current = localStorage.getItem(key) === 'true';
      localStorage.setItem(key, String(!current));
      checkAll();
    }
    
    function enableAll() {
      const keys = Object.keys(localStorage);
      const proactiveKeys = keys.filter(k => k.includes('ai_proactive_enabled_'));
      proactiveKeys.forEach(key => {
        localStorage.setItem(key, 'true');
      });
      alert('âœ… å·²å…¨éƒ¨å¼€å¯ï¼');
      checkAll();
    }
    
    function disableAll() {
      const keys = Object.keys(localStorage);
      const proactiveKeys = keys.filter(k => k.includes('ai_proactive_enabled_'));
      proactiveKeys.forEach(key => {
        localStorage.setItem(key, 'false');
      });
      alert('âŒ å·²å…¨éƒ¨å…³é—­ï¼');
      checkAll();
    }
    
    // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ£€æŸ¥
    checkAll();
  </script>
</body>
</html>
