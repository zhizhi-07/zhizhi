# 世界书概念详解 - 小白也能懂

## 什么是世界书？

### 最简单的比喻

想象你在和朋友聊天，但朋友记性不好，总是忘记你说过的话。

**世界书就是一个"自动提醒本"**：
- 你提到"北京"，它就提醒朋友："北京是中国的首都"
- 你提到"小明"，它就提醒朋友："小明是主角，25岁"
- 你提到"修仙"，它就提醒朋友："这是修仙世界，有各种境界"

这样，朋友（AI）就能记住这些设定，聊天更连贯！

---

## 核心概念解释

### 1. 关键词（Keys）

**是什么**: 触发提醒的"开关词"

**生活例子**:
```
就像闹钟：
- 设置关键词"起床" = 设置闹钟时间
- 说到"起床" = 闹钟响了
- 系统提醒 = 该起床了
```

**聊天例子**:
```
关键词：北京、Beijing、首都

你说："我在北京玩"
系统：检测到"北京"！
系统：提醒 AI → "北京是中国首都，有故宫长城"
AI 回复："北京很好玩吧！去故宫了吗？"
```

**为什么要多个关键词？**
- 有人说"北京"
- 有人说"Beijing"  
- 有人说"首都"
- 都是指同一个地方，所以都要能触发

---

### 2. 内容（Content）

**是什么**: 要提醒的具体信息

**生活例子**:
```
就像便利贴：
- 关键词 = 便利贴的标题
- 内容 = 便利贴上写的详细信息
```

**聊天例子**:
```
关键词：李明
内容：
  李明，25岁男性
  职业：程序员
  性格：内向、善良
  爱好：看书、打游戏

当聊到"李明"时，AI 就知道这些信息
```

**写内容的技巧**:
- 简洁明了，不要啰嗦
- 重点信息放前面
- 用分点列举，方便阅读

---

### 3. 优先级（Priority）

**是什么**: 哪些信息更重要（0-999）

**生活例子**:
```
就像打包行李：
- 优先级 900：护照、钱包（必须带）
- 优先级 500：衣服、洗漱用品（重要）
- 优先级 100：零食、玩具（可选）

箱子装不下时，先放重要的
```

**聊天例子**:
```
优先级 900：主角名字（最重要，必须记住）
优先级 700：主要配角信息（重要）
优先级 500：次要配角信息（一般）
优先级 300：路人信息（不太重要）
优先级 100：背景描述（可选）

当空间不够时，优先级低的会被舍弃
```

**怎么设置？**
- 核心设定：900-999
- 重要角色：700-899
- 一般信息：400-699
- 补充内容：100-399

---

### 4. 位置（Position）

**是什么**: 信息放在哪里

**生活例子**:
```
就像写作文：
- 顶部 = 开头（总起）
- 角色前 = 主体前半部分
- 角色后 = 主体后半部分
- 底部 = 结尾（总结）
```

**聊天例子**:
```
【顶部】
这是一个修仙世界，天地间充满灵气

【角色前】
主角李明的背景故事...

【角色设定】
李明，25岁，炼气三层...

【角色后】
李明最近在青云宗修炼...

【对话历史】
用户：你好
AI：你好

【底部】
注意保持角色性格一致
```

**选择建议**:
- 世界观总则 → 顶部
- 角色背景 → 角色前
- 补充信息 → 角色后
- 可选提示 → 底部

---

### 5. Token 预算

**是什么**: 限制使用多少"字数"

**生活例子**:
```
就像考试答题纸：
- 答题纸只有一页（Token 限制）
- 题目太多写不下（内容太多）
- 只能写重点（优先级高的）
```

**为什么需要？**
```
AI 的"大脑"有限：
- 一次只能看这么多字
- 超过了就"看不过来"
- 就像人的短期记忆

Token 预算 2000 ≈ 3000-4000 个中文字
```

**怎么设置？**
- 小型世界书：500-1000
- 中型世界书：1000-2000
- 大型世界书：2000-4000

---

### 6. 扫描深度

**是什么**: 检查最近多少条消息

**生活例子**:
```
就像短期记忆：
- 扫描深度 10 = 只记得最近 10 句话
- 第 11 句以前的就"忘了"
- 不会触发那些旧消息的关键词
```

**聊天例子**:
```
扫描深度设为 5：

第 1 条：今天天气真好
第 2 条：我去了公园
第 3 条：看到了小狗
第 4 条：还买了冰淇淋
第 5 条：我在北京玩 ← 能触发"北京"
第 6 条：（新消息）

只检查第 2-6 条（最近 5 条）
第 1 条太久了，不检查
```

**建议设置**:
- 一般对话：10 条
- 长对话：20 条
- 短对话：5 条

---

### 7. 大小写敏感

**是什么**: 区分大小写

**生活例子**:
```
就像密码：
- 关闭：Password = password = PASSWORD
- 开启：Password ≠ password（必须完全一样）
```

**聊天例子**:
```
关键词：Beijing

大小写敏感关闭：
"Beijing" ✓ 能触发
"beijing" ✓ 能触发
"BEIJING" ✓ 能触发

大小写敏感开启：
"Beijing" ✓ 能触发
"beijing" ✗ 不能触发
"BEIJING" ✗ 不能触发
```

**什么时候用？**
- 一般情况：关闭（更灵活）
- 专有名词：开启（更精确）

---

### 8. 始终注入

**是什么**: 不管有没有关键词，都要提醒

**生活例子**:
```
就像"必读须知"：
- 不管做什么，都要先看这个
- 不需要特定条件
- 永远有效
```

**聊天例子**:
```
始终注入：这是一个修仙世界

不管聊什么：
- 聊吃饭 → AI 知道这是修仙世界
- 聊睡觉 → AI 知道这是修仙世界
- 聊打架 → AI 知道这是修仙世界

不需要提到"修仙"这个词
```

**什么时候用？**
- 世界观总则
- 核心设定
- 必须记住的规则

---

### 9. 正则表达式

**是什么**: 高级匹配模式

**生活例子**:
```
就像模糊搜索：
- 普通搜索：必须完全一样
- 模糊搜索：差不多就行

"北京|Beijing|首都" = 三个词任意一个都行
```

**聊天例子**:
```
普通匹配：
关键词 1：北京
关键词 2：Beijing
关键词 3：首都
→ 要设置 3 个关键词

正则匹配：
关键词：北京|Beijing|首都
→ 只需要 1 个，用 | 分隔
```

**建议**:
- 新手：不用正则，用多个关键词
- 高手：可以用正则，更简洁

---

### 10. 全局 vs 角色专属

**是什么**: 谁能看到这个世界书

**生活例子**:
```
全局 = 公告栏（所有人都能看）
专属 = 私信（只有特定人能看）
```

**聊天例子**:
```
全局世界书：
内容：这是修仙世界，有炼气、筑基等境界
效果：和任何角色聊天，都知道这个设定

角色专属世界书：
内容：李明是你的师兄，对你很照顾
效果：只有和李明聊天时，AI 才知道这个
      和其他角色聊天，不会提到
```

**怎么选？**
- 世界观、规则 → 全局
- 角色关系、背景 → 专属

---

## 实际应用例子

### 例子 1：修仙小说设定

**场景**: 你在玩修仙角色扮演

**设置**:
```
条目 1：
  关键词：境界、修为、实力
  内容：修炼境界分为炼气、筑基、金丹、元婴、化神
  优先级：900（超重要）
  位置：顶部
  始终注入：是

条目 2：
  关键词：李明、主角、我
  内容：李明，25岁，炼气三层，性格谨慎
  优先级：900（超重要）
  位置：角色前

条目 3：
  关键词：青云宗、宗门
  内容：青云宗，五大宗门之一，宗主云天子
  优先级：700（重要）
  位置：角色后
```

**效果**:
```
你说："我现在什么境界？"
AI 看到：
  - 境界设定（条目1触发）
  - 李明信息（条目2触发）
AI 回复："你现在是炼气三层，距离筑基还有一段路"
```

---

### 例子 2：现代都市设定

**场景**: 你在玩都市恋爱游戏

**设置**:
```
条目 1：
  关键词：北京、Beijing、首都
  内容：北京是中国首都，有故宫、长城等景点
  优先级：500
  位置：角色后

条目 2：
  关键词：小美、女主
  内容：小美，22岁，大学生，性格活泼开朗
  优先级：900
  位置：角色前

条目 3：
  关键词：咖啡馆、星巴克
  内容：你们经常在学校附近的星巴克见面
  优先级：300
  位置：底部
```

**效果**:
```
你说："我们去北京玩吧"
AI 看到：
  - 北京信息（条目1触发）
  - 小美信息（条目2）
AI 回复："好啊！我一直想去故宫看看呢"
```

---

## 常见误区

### 误区 1：关键词越多越好
**错误**: 设置 100 个关键词  
**正确**: 5-10 个核心关键词就够了  
**原因**: 太多关键词反而容易误触发

### 误区 2：内容越详细越好
**错误**: 写 1000 字的详细描述  
**正确**: 200-300 字的精简描述  
**原因**: 太长占用 Token，重点不突出

### 误区 3：所有条目都设最高优先级
**错误**: 全部设 999  
**正确**: 分级设置 100-900  
**原因**: 没有区分就失去了优先级的意义

### 误区 4：不设置扫描深度
**错误**: 默认值不管  
**正确**: 根据对话长度调整  
**原因**: 太小会遗漏，太大会误触发

---

## 快速上手步骤

### 第 1 步：创建世界书
1. 打开"世界书"应用
2. 点击"+"创建
3. 填写名称和描述

### 第 2 步：添加第一个条目
1. 点击"添加条目"
2. 设置关键词（2-5 个）
3. 填写内容（100-200 字）
4. 优先级设 500（中等）

### 第 3 步：测试效果
1. 进入聊天
2. 说包含关键词的话
3. 看 AI 是否理解设定

### 第 4 步：优化调整
1. 关键词不够？添加更多
2. 没触发？检查扫描深度
3. 太频繁？降低优先级

---

## 总结

**世界书 = 自动提醒本**
- 关键词 = 什么时候提醒
- 内容 = 提醒什么
- 优先级 = 哪个更重要
- 位置 = 放在哪里
- Token = 能用多少字
- 扫描深度 = 记得多久

**核心原则**:
1. 简洁明了
2. 重点突出
3. 分级管理
4. 测试调整

**开始使用**:
- 从简单的开始
- 一个一个添加
- 边用边优化
- 不要怕出错

---

**记住**: 世界书不是一次性设置好的，而是在使用过程中不断完善的！
