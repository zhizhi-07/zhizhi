# 🎵 一起听邀请卡片 - 功能说明

## ✅ 已完成的功能

### 1. **邀请卡片组件** ✅
- **文件**: `src/components/MusicInviteCard.tsx`
- **功能**: 完整的邀请卡片UI组件
- **特点**:
  - 精美的网易云音乐风格设计
  - 支持三种状态：待处理、已接受、已拒绝
  - 包含歌曲信息、封面、音乐波纹动画
  - 交互按钮：接受/拒绝

### 2. **示例展示页面** ✅
- **文件**: `src/pages/MusicInviteDemo.tsx`
- **路由**: `/music-invite-demo`
- **功能**: 在聊天界面中展示邀请卡片效果

---

## 🎨 卡片设计

### 卡片结构

```
┌─────────────────────────────┐
│  🎵 一起听邀请               │  ← 红色渐变头部
├─────────────────────────────┤
│  汐汐 邀请你一起听歌          │  ← 邀请文字
│                             │
│  ┌──────────────────────┐  │
│  │ [封面] 罗生门         │  │  ← 歌曲信息卡
│  │        梨冻紧...      │  │
│  │              📊 波纹  │  │
│  └──────────────────────┘  │
│                             │
│  [ 拒绝 ]    [ 接受 ]      │  ← 操作按钮
└─────────────────────────────┘
```

### 视觉特点

1. **头部区域**
   - 红色到粉色渐变背景
   - 音乐图标 + "一起听邀请"文字
   - 颜色: `from-red-400 to-pink-500`

2. **邀请信息**
   - 显示邀请人姓名
   - 文字: "[姓名] 邀请你一起听歌"

3. **歌曲信息卡**
   - 浅灰色背景 `bg-gray-50`
   - 包含：
     - 封面图（12x12，圆角）
     - 歌曲名称（粗体）
     - 歌手名称（灰色小字）
     - 音乐波纹动画（4条动态竖线）

4. **操作按钮**
   - **拒绝**: 灰色背景，圆角
   - **接受**: 红粉渐变背景，带阴影

---

## 🎯 卡片状态

### 1. 待处理 (pending)
- 显示"拒绝"和"接受"按钮
- 可以点击操作

### 2. 已接受 (accepted)
- 隐藏操作按钮
- 显示绿色对勾 + "已接受邀请"
- 颜色: `text-green-600`

### 3. 已拒绝 (rejected)
- 隐藏操作按钮
- 显示灰色"已拒绝"文字
- 颜色: `text-gray-500`

---

## 💡 使用方法

### 访问示例页面
直接访问路由: `/music-invite-demo`

### 在聊天中使用
```tsx
import MusicInviteCard from '../components/MusicInviteCard'

<MusicInviteCard
  inviterName="汐汐"
  songTitle="罗生门（Follow）"
  songArtist="梨冻紧, Wiz_H张子豪"
  songCover="/path/to/cover.jpg"  // 可选
  status="pending"
  onAccept={() => {
    // 接受邀请的逻辑
    console.log('接受邀请')
  }}
  onReject={() => {
    // 拒绝邀请的逻辑
    console.log('拒绝邀请')
  }}
/>
```

---

## 🎬 动画效果

### 1. 音乐波纹动画
```css
4条竖线，使用 animate-pulse
延迟: 0ms, 150ms, 300ms, 450ms
效果: 模拟音乐播放的波形
```

### 2. 按钮交互
- Hover: 阴影增强
- Active: 轻微缩放
- 使用 `ios-button` 类

---

## 📱 在聊天中的效果

### 消息布局
```
[头像] [邀请卡片]
  汐    ┌───────────┐
        │ 卡片内容  │
        └───────────┘
```

### 与普通消息混合
```
[AI消息] 我最近在听这首歌，超好听的！
[邀请卡片] 一起听邀请
[AI消息] 一起听吧～
```

---

## 🔧 Props 说明

### MusicInviteCard Props

| 属性 | 类型 | 必填 | 说明 |
|------|------|------|------|
| `inviterName` | string | ✅ | 邀请人姓名 |
| `songTitle` | string | ✅ | 歌曲名称 |
| `songArtist` | string | ✅ | 歌手名称 |
| `songCover` | string | ❌ | 歌曲封面URL |
| `status` | 'pending' \| 'accepted' \| 'rejected' | ❌ | 卡片状态（默认pending） |
| `onAccept` | () => void | ❌ | 接受回调 |
| `onReject` | () => void | ❌ | 拒绝回调 |

---

## 🎨 颜色规范

### 主色调
- **红色渐变**: `from-red-400 to-pink-500`
- **接受按钮**: 同主色调
- **拒绝按钮**: `bg-gray-100`

### 状态颜色
- **已接受**: `text-green-600` (绿色)
- **已拒绝**: `text-gray-500` (灰色)

### 背景
- **卡片**: 白色 `bg-white`
- **歌曲信息**: `bg-gray-50`
- **边框**: `border-gray-100`

---

## 📂 文件清单

### 新增文件
- `src/components/MusicInviteCard.tsx` - 邀请卡片组件
- `src/pages/MusicInviteDemo.tsx` - 示例展示页面
- `一起听邀请卡片说明.md` - 本文档

### 修改文件
- `src/App.tsx` - 添加路由

---

## 🚀 下一步集成

### 1. 集成到音乐播放器
在 `MusicPlayer.tsx` 中：
- 点击"邀请"按钮
- 选择好友
- 发送邀请卡片到聊天

### 2. 集成到聊天页面
在 `ChatDetail.tsx` 中：
- 识别邀请卡片消息类型
- 渲染邀请卡片
- 处理接受/拒绝逻辑

### 3. 接受邀请后的行为
- 跳转到一起听聊天页面
- 同步播放相同歌曲
- 开始聊天互动

---

## 💻 代码示例

### 在聊天中渲染
```tsx
{message.type === 'musicInvite' && (
  <div className="flex items-end gap-2">
    <div className="avatar">AI头像</div>
    <MusicInviteCard
      inviterName={message.inviterName}
      songTitle={message.songTitle}
      songArtist={message.songArtist}
      status={message.status}
      onAccept={() => handleAcceptInvite(message.id)}
      onReject={() => handleRejectInvite(message.id)}
    />
  </div>
)}
```

### 发送邀请
```tsx
const sendMusicInvite = () => {
  const inviteMessage = {
    id: Date.now(),
    type: 'musicInvite',
    inviterName: '我',
    songTitle: currentSong.title,
    songArtist: currentSong.artist,
    songCover: currentSong.cover,
    status: 'pending',
    timestamp: Date.now()
  }
  
  setMessages(prev => [...prev, inviteMessage])
}
```

---

## 🎉 特色亮点

1. ✅ **精美设计** - 网易云音乐风格
2. ✅ **动态效果** - 音乐波纹动画
3. ✅ **状态管理** - 三种状态清晰区分
4. ✅ **交互友好** - 按钮反馈明确
5. ✅ **类型安全** - 完整TypeScript支持
6. ✅ **响应式** - 自适应卡片宽度

---

**现在可以在 `/music-invite-demo` 查看卡片效果！** 🎵✨
