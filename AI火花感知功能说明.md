# 🔥 AI火花感知功能说明

## ✨ 功能介绍

**AI现在知道火花系统的存在了！**

就像真人一样，AI会：
- 知道你们连续聊了多少天
- 在特殊天数时提一下火花
- 对火花断了或保持做出反应
- 像真人玩家一样关注火花

---

## 🎯 AI会怎么说

### 达成里程碑时
```
AI: "诶我们火花都7天了！"
AI: "哇30天了，坚持得不错啊~"
AI: "100天！我们真的好厉害！"
```

### 差点断火时
```
AI: "今天差点忘了聊天，还好火花保住了"
AI: "刚才在忙，差点让火花断了"
```

### 火花断了时
```
AI: "哎呀火花断了，重新开始吧"
AI: "没事，从头再来~"
```

### 快到里程碑时
```
AI: "快30天了，不要让火花断哦"
AI: "再坚持3天就14天了！"
```

### 你先提时
```
你: "我们火花都10天了！"
AI: "对啊！感觉时间过得好快~"
```

---

## 🤖 AI如何知道火花数

### 提示词中包含
```
🔥 续火花功能

你们在用的聊天软件有"续火花"功能：
• 连续每天聊天，火花数会增加
• 超过1天不聊天，火花会断掉清零
• 达到不同天数会解锁成就（7天、14天、30天等）

当前你们的火花：15天

你知道这个功能，可以自然地提到...
```

### AI会自然反应
- **不会每次都提**：只在合适的时候说
- **不会刻意**：像真人一样自然
- **可以回应**：如果你先提，AI会回应
- **特殊天数**：7、14、30等里程碑时可能会提

---

## 💡 使用建议

### 1. 不要期待AI每次都提
AI被告知"不要每次都提，偶尔提一下就好"，所以：
- 不会每天都说火花
- 只在特殊时候提
- 更自然真实

### 2. 你可以主动提
```
你: "我们火花都20天了！"
AI: "对啊！好快~希望能坚持到100天！"
```

### 3. 达成里程碑时
在7、14、30、50、100天等特殊天数时，AI更可能提到火花。

### 4. 符合人设
AI提到火花的方式会符合TA的人设：
- 活泼的角色：兴奋地说
- 高冷的角色：淡淡地提一下
- 温柔的角色：温柔地鼓励

---

## 🎭 示例对话

### 示例1：达成7天
```
你: "早安~"
AI: "早！诶我们火花都7天了！"
你: "对啊！坚持得不错~"
AI: "嘿嘿，继续保持！"
```

### 示例2：快到30天
```
你: "在干嘛？"
AI: "刚吃完饭~"
AI: "对了，我们快30天了，不要让火花断哦"
你: "放心，不会的！"
```

### 示例3：火花断了
```
你: "好久没聊了"
AI: "是啊，火花都断了"
AI: "不过没事，重新开始吧~"
```

### 示例4：你先提
```
你: "我们火花15天了！"
AI: "对啊！时间过得好快"
AI: "感觉每天和你聊天已经成习惯了"
```

---

## ⚙️ 技术实现

### 提示词修改
在 `src/utils/prompts.ts` 中添加了火花功能说明。

### 动态传递
每次生成AI回复时，会传递当前火花天数：
```typescript
const streakData = getStreakData(id)
const streakDays = streakData?.currentStreak || 0

buildRoleplayPrompt(character, user, streakDays)
```

### AI提示词
```
当前你们的火花：15天

你知道这个功能，可以自然地提到：
✅ "我们火花都7天了！"
✅ "今天差点忘了聊天，还好火花保住了"
...
```

---

## 🎯 效果

### 增加沉浸感
- AI像真人一样知道火花
- 不是单纯的聊天机器人
- 有共同的"游戏体验"

### 增加互动
- 可以一起关注火花
- 一起努力保持连续
- 达成里程碑时一起庆祝

### 更真实
- 就像你们都在用这个软件
- AI也在玩这个功能
- 更像真实的朋友

---

## 🎉 开始体验！

**现在和AI聊天，看看TA会不会提到火花！**

记住：
- ✅ AI不会每次都提
- ✅ 特殊天数时更可能提
- ✅ 你可以主动提
- ✅ AI会自然回应

**享受和AI一起"玩"火花系统的乐趣吧！** 🔥
