# 纸飞机按钮智能切换功能

## ✅ 已完成的修改

### 纸飞机按钮的智能切换逻辑

根据输入框内容自动切换功能：

#### 1. **输入框为空时**
- 🔵 **蓝色纸飞机** = AI 回复
- 点击后触发 AI 生成回复
- 不需要输入任何内容

#### 2. **输入框有内容时**
- 🟢 **绿色纸飞机** = 发送消息
- 点击后发送用户输入的消息
- 发送后清空输入框

## 🎯 使用方法

### 场景 1：请求 AI 回复
```
1. 输入框保持为空
2. 点击蓝色纸飞机按钮
3. AI 会根据对话历史生成回复
```

### 场景 2：发送消息
```
1. 在输入框输入文字
2. 纸飞机变为绿色
3. 点击发送或按 Enter
4. 消息发送，输入框清空
```

### 场景 3：连续对话
```
1. 输入消息 → 发送（绿色）
2. 点击纸飞机（蓝色）→ AI 回复
3. 输入消息 → 发送（绿色）
4. 点击纸飞机（蓝色）→ AI 回复
```

## 🎨 视觉反馈

### 按钮颜色
- **蓝色**（`bg-blue-600`）：输入框为空，点击触发 AI 回复
- **绿色**（`bg-green-600`）：输入框有内容，点击发送消息

### 提示文本
- 鼠标悬停时显示：
  - 输入框为空：`"AI回复"`
  - 输入框有内容：`"发送消息"`

## 💡 设计理念

这个设计参考了微信等主流聊天应用的交互模式：
- **一个按钮，两种功能**
- **根据上下文智能切换**
- **减少界面复杂度**
- **提高操作效率**

## 🔧 技术实现

### 核心逻辑
```typescript
const handleSendMessage = () => {
  if (!inputValue.trim()) {
    // 输入框为空，触发 AI 回复
    if (onRequestAIReply) {
      onRequestAIReply()
    }
    return
  }

  // 输入框有内容，发送消息
  if (onSendMessage) {
    onSendMessage(inputValue)
  }
  
  setInputValue('')
}
```

### 按钮样式
```tsx
<button
  onClick={handleSendMessage}
  className={`w-8 h-8 rounded-full flex items-center justify-center ios-button transition-all ${
    inputValue.trim() ? 'bg-green-600' : 'bg-blue-600'
  }`}
  title={inputValue.trim() ? '发送消息' : 'AI回复'}
>
  <SendIcon size={16} className="text-white" />
</button>
```

## 📊 对比

### 修改前
```
[输入框............][发送] [🤖 AI回复]
```
- 两个按钮
- 需要判断点击哪个
- 界面较复杂

### 修改后
```
[输入框............][纸飞机]
```
- 一个按钮
- 自动判断功能
- 界面更简洁

## ✨ 优势

1. **更简洁**：减少一个按钮，界面更清爽
2. **更智能**：自动判断用户意图
3. **更高效**：减少操作步骤
4. **更直观**：颜色变化提示当前功能
5. **符合习惯**：与主流应用交互一致

## 🎯 完整流程示例

```
用户操作                    按钮状态        触发功能
─────────────────────────────────────────────
打开通话界面                 🔵 蓝色        -
点击纸飞机                   🔵 蓝色        AI 回复
AI 回复显示                  🔵 蓝色        -
输入"你好"                   🟢 绿色        -
点击纸飞机                   🟢 绿色        发送消息
消息发送，输入框清空          🔵 蓝色        -
点击纸飞机                   🔵 蓝色        AI 回复
AI 回复显示                  🔵 蓝色        -
```

现在通话界面的交互更加简洁和智能了！🎉
