const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pages-Cx-zzNcQ.js","assets/react-vendor-D8ofYTc3.js","assets/vendor-BOALdufa.js","assets/context-BPvo2RgQ.js","assets/utils-Bw01K5Nk.js","assets/pages-B0g7P9tg.css"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{r as s,j as a,u as n,a as r,O as l,B as i,c,d as o,e as h,R as d}from"./react-vendor-D8ofYTc3.js";import{C as x,a as m,D as j,P as p,S as u,M as _,_ as g,b as f,c as y,d as v,e as b}from"./pages-Cx-zzNcQ.js";import{b as w,f as E,u as I,d as N,j as z,T as L,B as P,S as T,A,U as R,C as D,p as V,M as O,R as k,q as C,G as S,r as $,F as M,s as B,t as F,e as W}from"./context-BPvo2RgQ.js";import{bD as q,bE as H,bF as J,bG as K,P as G}from"./utils-Bw01K5Nk.js";import"./vendor-BOALdufa.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const U=({show:e,title:t,subtitle:n,message:r,icon:l,onClose:i,onClick:c,duration:o=5e3})=>{const[h,d]=s.useState(!1),[x,m]=s.useState(0),[j,p]=s.useState(0),[u,_]=s.useState(!1);s.useEffect(()=>{if(e){d(!0);const e=setTimeout(()=>{g()},o);return()=>clearTimeout(e)}},[e,o]);const g=()=>{d(!1),setTimeout(()=>{i()},300)};return e||h?a.jsx("div",{className:"fixed inset-0 z-[9999] pointer-events-none",children:a.jsx("div",{className:"absolute top-0 left-0 right-0 flex justify-center px-2 pt-2 transition-all duration-300 pointer-events-auto "+(h?"translate-y-0 opacity-100":"-translate-y-full opacity-0"),style:{transform:`translateY(${h?j:-100}px)`},children:a.jsxs("div",{className:"w-full max-w-[393px] bg-white/95 backdrop-blur-2xl rounded-[20px] shadow-2xl overflow-hidden cursor-pointer",onClick:()=>{c&&c(),g()},onTouchStart:e=>{m(e.touches[0].clientY),_(!0)},onTouchMove:e=>{if(!u)return;const t=e.touches[0].clientY-x;t<0&&p(t)},onTouchEnd:()=>{j<-50&&g(),p(0),_(!1)},style:{boxShadow:"0 10px 40px rgba(0, 0, 0, 0.15), 0 2px 8px rgba(0, 0, 0, 0.08)"},children:[a.jsx("div",{className:"w-full h-1 flex justify-center pt-1",children:a.jsx("div",{className:"w-9 h-1 bg-gray-300/60 rounded-full"})}),a.jsx("div",{className:"px-3 pt-2 pb-3",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 mt-0.5",children:l?a.jsx("img",{src:l,alt:t,className:"w-8 h-8 rounded-lg"}):a.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-blue-400 to-blue-500 flex items-center justify-center",children:a.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:[a.jsx("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"}),a.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"18"})]})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-baseline justify-between gap-2 mb-0.5",children:[a.jsx("span",{className:"text-[13px] font-semibold text-gray-900 truncate",children:t}),a.jsx("span",{className:"text-[11px] text-gray-500 flex-shrink-0",children:"现在"})]}),n&&a.jsx("div",{className:"text-[13px] text-gray-600 mb-1 truncate",children:n}),a.jsx("div",{className:"text-[13px] text-gray-900 leading-[18px] line-clamp-3",children:r})]})]})})]})})}):null},Y=()=>{const[e,t]=s.useState(null);s.useEffect(()=>{const e=q.subscribe(e=>{t(e)});return()=>{e()}},[]);return a.jsx(U,{show:!!e,title:(null==e?void 0:e.title)||"",subtitle:null==e?void 0:e.subtitle,message:(null==e?void 0:e.message)||"",icon:null==e?void 0:e.icon,onClose:()=>{q.close()},onClick:null==e?void 0:e.onClick,duration:null==e?void 0:e.duration})},X=()=>{const e=n(),[t,r]=s.useState(null),[l,i]=s.useState(!1);s.useEffect(()=>{H(e=>{r(e),i(!0)})},[]);return t?a.jsx(U,{show:l,title:t.title,subtitle:t.subtitle,message:t.message,icon:"💬",onClose:()=>{i(!1),setTimeout(()=>{r(null)},300)},onClick:()=>{if(t)switch(t.type){case"comment":case"like":t.targetId&&e(`/forum/post/${t.targetId}`);break;case"dm":e("/forum/notifications?tab=messages");break;case"follow":e("/forum/notifications?tab=follows");break;case"init":case"system":e("/forum")}},duration:5e3}):null},Q=()=>{const e=n(),[t,r]=s.useState(null),[l,i]=s.useState(!1);s.useEffect(()=>{const e=e=>{const{title:t,message:s,characterId:a}=e.detail;r({title:t,message:s,characterId:a}),i(!0)};return window.addEventListener("background-chat-message",e),()=>{window.removeEventListener("background-chat-message",e)}},[]);return t?a.jsx(U,{show:l,title:t.title,message:t.message,icon:"💬",onClose:()=>{i(!1),setTimeout(()=>{r(null)},300)},onClick:()=>{t&&e(`/chat/${t.characterId}`)},duration:5e3}):null},Z=({isPlaying:e,currentSong:t,onPlayPause:r,onNext:l,onPrevious:i,currentTime:c,duration:o})=>{const h=n(),[d,x]=s.useState(!1),[m,j]=s.useState(0),p=(u=null==t?void 0:t.lyrics)?u.split("\n").map(e=>{const t=e.match(/\[(\d+):(\d+)\.(\d+)\](.*)/);return t?{time:60*parseInt(t[1])+parseInt(t[2])+parseInt(t[3])/1e3,text:t[4].trim()}:null}).filter(e=>{if(!e||!e.text)return!1;const t=e.text;return!(t.includes("作词")||t.includes("作曲")||t.includes("编曲")||t.includes("制作")||t.includes("混音")||t.includes("录音")||t.includes("母带")||t.includes("监制")||t.includes("发行")||t.includes("企划")||t.includes("封面")||t.includes("钢琴")||t.includes("吉他")||t.includes("贝斯")||t.includes("鼓")||t.includes("弦乐")||t.includes("No Label Crew")||t.includes("本歌曲来自")||t.includes("营销推广")||t.includes("青云")||t.includes("LAB"))}).sort((e,t)=>e.time-t.time):[];var u;const _=p.map(e=>e.text);s.useEffect(()=>{if(p.length>0){let e=0;for(let t=0;t<p.length&&c>=p[t].time;t++)e=t;j(e)}},[c,p]);const g=()=>{d?h("/music-player"):x(!0)},f=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`;return t?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed top-2 left-1/2 -translate-x-1/2 z-[9999] transition-all duration-500 "+(d?"opacity-0 pointer-events-none":"opacity-100"),onClick:g,children:a.jsxs("div",{className:"bg-black rounded-full px-2.5 py-1.5 flex items-center gap-1.5 shadow-lg cursor-pointer hover:scale-105 transition-transform w-[150px]",children:[a.jsx("div",{className:"w-5 h-5 rounded-full overflow-hidden flex-shrink-0",children:a.jsx("img",{src:t.cover,alt:t.title,className:"w-full h-full object-cover "+(e?"animate-spin-slow":"")})}),a.jsx("div",{className:"overflow-hidden flex-1",children:a.jsx("div",{className:"text-white text-xs whitespace-nowrap",children:_[m]||t.title})}),a.jsx("div",{className:"flex items-center gap-0.5",children:e?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-0.5 h-2 bg-white rounded animate-pulse"}),a.jsx("div",{className:"w-0.5 h-3 bg-white rounded animate-pulse",style:{animationDelay:"0.1s"}}),a.jsx("div",{className:"w-0.5 h-1.5 bg-white rounded animate-pulse",style:{animationDelay:"0.2s"}})]}):a.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M8 5v14l11-7z"})})})]})}),d&&a.jsx("div",{className:"fixed inset-0 bg-black/20 z-[9998]",onClick:()=>x(!1)}),a.jsx("div",{className:"fixed top-2 left-1/2 -translate-x-1/2 z-[9999] transition-all duration-500 "+(d?"opacity-100":"opacity-0 pointer-events-none"),children:a.jsxs("div",{className:"bg-black rounded-3xl p-4 w-[320px] shadow-2xl",onClick:e=>e.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"w-11 h-11 rounded-xl overflow-hidden flex-shrink-0",children:a.jsx("img",{src:t.cover,alt:t.title,className:"w-full h-full object-cover "+(e?"animate-spin-slow":"")})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-white font-medium truncate",children:t.title}),a.jsx("div",{className:"text-gray-400 text-sm truncate",children:t.artist})]}),a.jsx("button",{onClick:e=>{e.stopPropagation(),x(!1)},className:"text-gray-400 hover:text-white transition-colors",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),_.length>0&&a.jsx("div",{className:"mb-3 h-16 overflow-hidden flex items-center justify-center",children:a.jsx("div",{className:"text-center space-y-1",children:_.slice(Math.max(0,m-1),m+2).map((e,t)=>a.jsx("p",{className:"text-sm transition-all duration-300 "+(1===t?"text-white font-medium text-base":"text-gray-500 text-xs"),children:e},t))})}),a.jsxs("div",{className:"mb-3",children:[a.jsx("div",{className:"h-1 bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-white rounded-full transition-all",style:{width:c/o*100+"%"}})}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[a.jsx("span",{children:f(c)}),a.jsx("span",{children:f(o)})]})]}),a.jsxs("div",{className:"flex items-center justify-center gap-6",children:[a.jsx("button",{onClick:e=>{e.stopPropagation(),i()},className:"text-white hover:scale-110 transition-transform",children:a.jsx("svg",{className:"w-7 h-7",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M6 6h2v12H6zm3.5 6l8.5 6V6z"})})}),a.jsx("button",{onClick:e=>{e.stopPropagation(),r()},className:"w-12 h-12 bg-white rounded-full flex items-center justify-center hover:scale-110 transition-transform",children:e?a.jsx("svg",{className:"w-6 h-6 text-black",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):a.jsx("svg",{className:"w-6 h-6 text-black ml-0.5",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M8 5v14l11-7z"})})}),a.jsx("button",{onClick:e=>{e.stopPropagation(),l()},className:"text-white hover:scale-110 transition-transform",children:a.jsx("svg",{className:"w-7 h-7",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"})})})]}),a.jsx("div",{className:"text-center mt-3",children:a.jsx("button",{onClick:g,className:"text-gray-400 text-xs hover:text-white transition-colors",children:"点击返回播放器"})})]})}),a.jsx("style",{children:"\n        @keyframes marquee {\n          0% { transform: translateX(0); }\n          100% { transform: translateX(-50%); }\n        }\n\n        .animate-marquee {\n          animation: marquee 10s linear infinite;\n        }\n\n        @keyframes spin-slow {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n\n        .animate-spin-slow {\n          animation: spin-slow 10s linear infinite;\n        }\n      "})]}):null},ee=()=>{const e=r(),t=n(),[i,c]=s.useState(0),{background:o}=w(),h=[{name:"微信",path:"/wechat",Icon:x},{name:"通讯录",path:"/wechat/contacts",Icon:m},{name:"发现",path:"/wechat/discover",Icon:j},{name:"我",path:"/wechat/me",Icon:p}];s.useEffect(()=>{const t=h.findIndex(t=>t.path===e.pathname);-1!==t&&c(t)},[e.pathname]);const d=o?{backgroundImage:`url(${o})`,backgroundSize:"cover",backgroundPosition:"center"}:{};return a.jsxs("div",{className:"h-screen flex flex-col "+(o?"":"gradient-bg"),style:d,children:[a.jsx("div",{className:"flex-1 overflow-hidden",children:a.jsx(l,{})}),a.jsxs("nav",{className:"border-t border-gray-200/50 "+(o?"glass-dark":"glass-effect"),role:"navigation","aria-label":"主导航",children:[a.jsx("div",{className:"h-16 flex items-center justify-around px-2",children:h.map((e,s)=>{const n=e.Icon,r=i===s;return a.jsxs("button",{onClick:()=>((e,s)=>{c(e),t(s)})(s,e.path),className:"flex flex-col items-center justify-center flex-1 py-2 ios-button","aria-label":`${e.name}${r?"，当前页面":""}`,"aria-current":r?"page":void 0,tabIndex:0,children:[a.jsx(n,{size:26,className:"mb-1 smooth-transition "+(r?"text-wechat-primary scale-110":"text-gray-600"),"aria-hidden":"true"}),a.jsx("span",{className:"text-xs smooth-transition "+(r?"text-wechat-primary font-medium":"text-gray-600"),children:e.name})]},s)})}),a.jsx("div",{className:"flex justify-center pb-2","aria-hidden":"true",children:a.jsx("div",{className:"w-32 h-1 bg-gray-900 rounded-full opacity-40"})})]})]})},te=({children:e})=>((()=>{const e=E(),{moments:t,likeMoment:a,addComment:n}=e,r=I(),{characters:l,getCharacter:i}=r,{currentUser:c}=N(),o=s.useRef(t),h=s.useRef(new Set);if("true"===localStorage.getItem("emergency_stop_ai_moments"))return;const d=s.useCallback((e,t)=>{const s=localStorage.getItem(`chat_messages_${e}`);if(!s)return`与 ${t} 之间没有聊天记录。`;try{const a=JSON.parse(s),n=i(e);if(!n)return"未知角色。";const r=a.filter(e=>"system"!==e.type&&"system"!==e.messageType).slice(-30);if(0===r.length)return`与 ${t} 之间还没有实际对话，只有系统消息。`;const l=r.map(e=>`${"sent"===e.type?t:n.name}: ${e.content}`).join("\n");return`最近的聊天记录（共${r.length}条）：\n${l}`}catch(a){return"聊天记录解析失败。"}},[i]);s.useEffect(()=>{const s=o.current;t.forEach(t=>{const a=s.find(e=>e.id===t.id),n=!a,o=a&&t.comments.length>a.comments.length;if(n&&!h.current.has(t.id)){h.current.add(t.id);const s=l.some(e=>e.id===t.userId)?i(t.userId):c?{id:c.id,name:c.name}:null;if(!s)return;setTimeout(async()=>{const a=await J(t,l,s,e=>d(e,s.name));a&&K(a,t,e,r)},2e3+3e3*Math.random())}if(o){const a=s.find(e=>e.id===t.id);if(a&&t.comments.slice(a.comments.length).some(e=>!l.some(t=>t.id===e.userId))){const s=l.some(e=>e.id===t.userId)?i(t.userId):c?{id:c.id,name:c.name}:null;if(!s)return;setTimeout(async()=>{const a=await J(t,l,s,e=>d(e,s.name));a&&K(a,t,e,r)},1500+2e3*Math.random())}}}),o.current=t},[t,l,c,a,n,i,e,r,d])})(),a.jsx(a.Fragment,{children:e}));class se extends s.Component{constructor(e){super(e),t(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})}),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:a.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[a.jsx("div",{className:"flex items-center justify-center w-16 h-16 mx-auto bg-red-100 rounded-full mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),a.jsx("h2",{className:"text-xl font-bold text-gray-800 text-center mb-2",children:"出错了"}),a.jsx("p",{className:"text-gray-600 text-center mb-4",children:"应用遇到了一个错误，请尝试刷新页面"}),!1,a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:this.handleReset,className:"flex-1 bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors",children:"重试"}),a.jsx("button",{onClick:()=>window.location.href="/",className:"flex-1 bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors",children:"返回首页"})]})]})}):this.props.children}}const ae=()=>{const[e,t]=s.useState(navigator.onLine),[n,r]=s.useState(!1);return s.useEffect(()=>{const e=()=>{t(!0),r(!0),setTimeout(()=>r(!1),3e3)},s=()=>{t(!1),r(!0)};return window.addEventListener("online",e),window.addEventListener("offline",s),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",s)}},[]),n?a.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 animate-slide-down",children:a.jsx("div",{className:"px-6 py-3 rounded-lg shadow-lg flex items-center gap-3 "+(e?"bg-green-500 text-white":"bg-red-500 text-white"),children:e?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),a.jsx("span",{className:"font-medium",children:"网络已恢复"})]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),a.jsx("span",{className:"font-medium",children:"网络已断开"})]})})}):null},ne=({show:e,character:t,isVideoCall:n,onEnd:r,onSendMessage:l,onRequestAIReply:i,messages:c,isAITyping:o})=>{const[h,d]=s.useState(0),[x,m]=s.useState(!1),[j,p]=s.useState(!1),[g,f]=s.useState(!1),[y,v]=s.useState(""),b=s.useRef(null),w=c||[];s.useEffect(()=>{if(!e)return d(0),void f(!1);const t=setInterval(()=>{d(e=>e+1)},1e3);return()=>clearInterval(t)},[e]),s.useEffect(()=>{var e;null==(e=b.current)||e.scrollIntoView({behavior:"smooth"})},[w]);const E=e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`},I=()=>{y.trim()?(l&&l(y),v("")):i&&i()};return e?a.jsxs(a.Fragment,{children:[!g&&a.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col "+(n?"bg-black":"bg-white"),children:[n&&a.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-800 to-gray-900 flex items-center justify-center",children:[a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:t.avatar?t.avatar.startsWith("data:image")||t.avatar.startsWith("http")?a.jsx("img",{src:t.avatar,alt:t.name,className:"w-48 h-48 rounded-full object-cover"}):a.jsx("span",{className:"text-9xl",children:t.avatar}):a.jsx("div",{className:"w-48 h-48 rounded-full bg-gray-700 flex items-center justify-center",children:a.jsx("span",{className:"text-white text-6xl",children:t.name.charAt(0)})})}),a.jsx("div",{className:"absolute top-4 right-4 w-24 h-32 bg-gray-900 rounded-lg overflow-hidden border-2 border-white/30 shadow-2xl",children:a.jsx("div",{className:"w-full h-full bg-gradient-to-br from-gray-700 to-gray-800 flex items-center justify-center",children:a.jsx("span",{className:"text-white text-2xl",children:"我"})})})]}),a.jsxs("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-between px-4 py-4 z-10 "+(n?"bg-gradient-to-b from-black/60 to-transparent":"bg-gray-50 border-b border-gray-200"),children:[a.jsx("button",{onClick:()=>f(!0),className:"w-10 h-10 rounded-full flex items-center justify-center ios-button "+(n?"bg-white/20 backdrop-blur-sm hover:bg-white/30":"bg-gray-200 hover:bg-gray-300"),children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M19 13H5v-2h14v2z",fill:n?"white":"#374151"})})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden flex items-center justify-center "+(n?"bg-white/20 backdrop-blur-sm":"bg-gray-200"),children:t.avatar?t.avatar.startsWith("data:image")||t.avatar.startsWith("http")?a.jsx("img",{src:t.avatar,alt:t.name,className:"w-full h-full object-cover"}):a.jsx("span",{className:"text-lg",children:t.avatar}):a.jsx("span",{className:"text-sm "+(n?"text-white":"text-gray-700"),children:t.name.charAt(0)})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium "+(n?"text-white drop-shadow-lg":"text-gray-900"),children:t.name}),a.jsx("span",{className:"text-sm "+(n?"text-white/80 drop-shadow":"text-gray-500"),children:E(h)})]})]}),a.jsxs("div",{className:"w-10 h-10 flex items-center justify-center",children:[n&&a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"white",children:[a.jsx("rect",{x:"2",y:"5",width:"16",height:"14",rx:"2",stroke:"white",strokeWidth:"2",fill:"none"}),a.jsx("path",{d:"M18 10l4-2v8l-4-2",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]}),!n&&a.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"#10b981",children:a.jsx("path",{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"})})]})]}),a.jsx("div",{className:"absolute left-0 right-0 overflow-y-auto px-4 py-4 hide-scrollbar z-10 "+(n?"bottom-48 max-h-[40%] bg-gradient-to-t from-black/60 to-transparent":"bottom-44 top-20 bg-white"),children:0===w.length?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("p",{className:"text-sm "+(n?"text-white/60":"text-gray-400"),children:"开始对话..."})}):a.jsxs("div",{className:"space-y-3",children:[w.map(e=>"narrator"===e.type?a.jsx("div",{className:"flex justify-center",children:a.jsx("p",{className:"text-xs italic px-4 py-1 text-center max-w-[80%] "+(n?"text-white/70 drop-shadow":"text-gray-500"),children:e.content})},e.id):a.jsx("div",{className:"flex "+("user"===e.type?"justify-end":"justify-start"),children:a.jsx("div",{className:"max-w-[70%] px-4 py-2 rounded-2xl shadow-lg "+("user"===e.type?"bg-green-500 text-white":n?"bg-white/90 backdrop-blur-sm text-gray-900":"bg-gray-100 text-gray-900"),children:a.jsx("p",{className:"text-sm break-words",children:e.content})})},e.id)),o&&a.jsx("div",{className:"flex justify-start",children:a.jsx("div",{className:"px-4 py-3 rounded-2xl shadow-lg "+(n?"bg-white/90 backdrop-blur-sm":"bg-gray-100"),children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms",animationDuration:"1s"}}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms",animationDuration:"1s"}}),a.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms",animationDuration:"1s"}})]})})}),a.jsx("div",{ref:b})]})}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 px-4 pb-6 z-20 "+(n?"bg-gradient-to-t from-black/90 via-black/80 to-transparent pt-8":"bg-white pt-4"),children:[a.jsxs("div",{className:"rounded-full px-4 py-2 flex items-center gap-2 mb-4 "+(n?"bg-white/20 backdrop-blur-md border border-white/30":"bg-gray-100 border border-gray-200"),children:[a.jsx("input",{type:"text",value:y,onChange:e=>v(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),I())},placeholder:"说点什么...",className:"flex-1 bg-transparent outline-none text-sm "+(n?"text-white placeholder-white/60":"text-gray-900 placeholder-gray-400")}),a.jsx("button",{onClick:I,className:"w-8 h-8 rounded-full flex items-center justify-center ios-button transition-all "+(y.trim()?"bg-green-500":"bg-blue-500"),title:y.trim()?"发送消息":"AI回复",children:a.jsx(u,{size:16,className:"text-white"})})]}),a.jsxs("div",{className:"flex justify-center items-center gap-8",children:[a.jsx("button",{onClick:()=>m(!x),className:"w-16 h-16 rounded-full flex items-center justify-center ios-button transition-all "+(x?"bg-red-500 shadow-2xl":n?"bg-white/20 backdrop-blur-md":"bg-gray-200"),children:a.jsx(_,{size:28,className:x||n?"text-white":"text-gray-700"})}),a.jsx("button",{onClick:r,className:"w-20 h-20 rounded-full bg-red-500 flex items-center justify-center ios-button shadow-2xl hover:bg-red-600",children:a.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"white",children:a.jsx("path",{d:"M12,9C10.4,9,8.85,9.25,7.4,9.72v2.09C7.4,12.46,6.86,13,6.21,13H3.78c-0.65,0-1.18-0.54-1.18-1.18v-1.09 C2.6,5.88,6.88,1.6,11.73,1.6h0.55c4.85,0,9.13,4.28,9.13,9.13v1.09c0,0.65-0.54,1.18-1.18,1.18h-2.43 c-0.65,0-1.18-0.54-1.18-1.18V9.72C15.15,9.25,13.6,9,12,9z"})})}),a.jsx("button",{onClick:()=>p(!j),className:"w-16 h-16 rounded-full flex items-center justify-center ios-button transition-all "+(j?"bg-green-500 shadow-2xl":n?"bg-white/20 backdrop-blur-md":"bg-gray-200"),children:a.jsx("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:j||n?"white":"#374151",children:a.jsx("path",{d:"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"})})})]})]})]}),g&&a.jsxs("div",{onClick:()=>f(!1),className:"fixed top-20 right-4 z-50 bg-white rounded-2xl shadow-2xl p-3 flex items-center gap-3 cursor-pointer ios-button border border-gray-200",children:[a.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden bg-gray-200 flex items-center justify-center",children:t.avatar?t.avatar.startsWith("data:image")||t.avatar.startsWith("http")?a.jsx("img",{src:t.avatar,alt:t.name,className:"w-full h-full object-cover"}):a.jsx("span",{className:"text-lg",children:t.avatar}):a.jsx("span",{className:"text-gray-700 text-sm",children:t.name.charAt(0)})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-gray-900 text-sm font-medium",children:t.name}),a.jsx("span",{className:"text-gray-500 text-xs",children:E(h)})]}),a.jsx("button",{onClick:e=>{e.stopPropagation(),r()},className:"w-8 h-8 rounded-full bg-red-500 flex items-center justify-center ml-2",children:a.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"white",children:a.jsx("path",{d:"M12,9C10.4,9,8.85,9.25,7.4,9.72v2.09C7.4,12.46,6.86,13,6.21,13H3.78c-0.65,0-1.18-0.54-1.18-1.18v-1.09 C2.6,5.88,6.88,1.6,11.73,1.6h0.55c4.85,0,9.13,4.28,9.13,9.13v1.09c0,0.65-0.54,1.18-1.18,1.18h-2.43 c-0.65,0-1.18-0.54-1.18-1.18V9.72C15.15,9.25,13.6,9,12,9z"})})})]})]}):null},re=()=>{const{callState:e,endCall:t,sendMessage:n,addAIMessage:r,addNarratorMessage:l,setAITyping:i}=z(),{currentUser:c}=N(),o=s.useRef(!1),h=(e,t,s,a)=>{const n={id:Date.now(),type:"system",content:`${s?"视频":"语音"}通话 ${Math.floor(t/60)}分${t%60}秒`,time:(new Date).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),timestamp:Date.now(),isCallRecord:!0,callDuration:t,callMessages:e,messageType:"system"},r=localStorage.getItem(`chat_messages_${a}`),l=[...r?JSON.parse(r):[],n];localStorage.setItem(`chat_messages_${a}`,JSON.stringify(l));const i=new CustomEvent("callRecordSaved",{detail:{characterId:a,messageCount:l.length}});window.dispatchEvent(i)},d=async()=>{i(!0);try{const t=(new Date).toLocaleString("zh-CN",{month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}),s=e.character;if(!s)return;const a=s.relationship||"朋友",n=s.favorability||50,i=e.isVideoCall?"视频通话":"语音通话",o=e.messages.slice(-5).map(e=>"user"===e.type?`${(null==c?void 0:c.name)||"用户"}: ${e.content}`:"ai"===e.type?`${s.name}: ${e.content}`:"narrator"===e.type?`[${e.content}]`:"").join("\n"),h=e.isAIInitiated&&0===e.messages.length,d=`你是 ${s.name}。\n${s.profile||""}\n\n现在是${t}，你正在和${(null==c?void 0:c.name)||"用户"}${i}。\n\n你们的关系：${a}\n当前好感度：${n}/100\n\n${h?"**情况说明**：是你主动打电话给对方的，对方刚接通电话。请说开场白，告诉TA你为什么打电话来。":`最近的通话内容：\n${o||"（刚开始通话）"}`}\n\n请自然地继续对话。注意：\n1. 这是实时${i}，要像真人一样自然交流，**分段回复**让对话更真实\n2. 将你的回复分成多个片段，每个片段用 ||| 分隔\n3. 每个片段可以是：\n   - 简短的话语（如："嗯..."、"就是..."、"我觉得..."）\n   - 旁白描述（只在必要时用括号，如：(沉默了几秒)、(叹了口气)）\n   - 完整的句子\n4. **重要**：不要每句话都加旁白，只在关键时刻加旁白（停顿、情绪变化等）\n5. 如果是视频通话，可以描述表情、动作\n6. 保持角色性格一致\n\n**示例格式：**\n嗯...|||就是...|||（停顿了一下）|||我想说的是...|||其实挺想你的\n\n只返回分段内容，用|||分隔每一段，不要加任何其他前缀或说明。`,x=(await G([{role:"user",content:d}])).split("|||").map(e=>e.trim()).filter(e=>e.length>0);for(let e=0;e<x.length;e++){const t=x[e];e>0&&await new Promise(e=>setTimeout(e,800+800*Math.random()));const s=t.match(/^[\(（](.+?)[\)）]$/);s?l(s[1]):r(t)}}catch(t){r("抱歉，刚才没听清...")}finally{i(!1)}};return s.useEffect(()=>{e.isActive&&e.isAIInitiated&&!o.current&&0===e.messages.length&&(o.current=!0,setTimeout(()=>{d()},800)),e.isActive||(o.current=!1)},[e.isActive,e.isAIInitiated,e.messages.length]),e.isActive&&e.character?a.jsx(ne,{show:e.isActive,character:e.character,isVideoCall:e.isVideoCall,onEnd:()=>t(h),onSendMessage:e=>{n(e)},onRequestAIReply:d,messages:e.messages,isAITyping:e.isAITyping}):null},le=()=>a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mb-4"}),a.jsx("p",{className:"text-gray-600",children:"加载中..."})]})}),ie=e=>s.lazy(()=>e().catch(t=>e().catch(e=>{throw e}))),ce=ie(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.f),__vite__mapDeps([0,1,2,3,4,5]))),oe=ie(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.g),__vite__mapDeps([0,1,2,3,4,5]))),he=ie(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.h),__vite__mapDeps([0,1,2,3,4,5]))),de=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.i),__vite__mapDeps([0,1,2,3,4,5]))),xe=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.j),__vite__mapDeps([0,1,2,3,4,5]))),me=ie(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.k),__vite__mapDeps([0,1,2,3,4,5]))),je=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.E),__vite__mapDeps([0,1,2,3,4,5]))),pe=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.l),__vite__mapDeps([0,1,2,3,4,5]))),ue=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.A),__vite__mapDeps([0,1,2,3,4,5]))),_e=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.m),__vite__mapDeps([0,1,2,3,4,5]))),ge=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.n),__vite__mapDeps([0,1,2,3,4,5]))),fe=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.o),__vite__mapDeps([0,1,2,3,4,5]))),ye=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.p),__vite__mapDeps([0,1,2,3,4,5]))),ve=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.U),__vite__mapDeps([0,1,2,3,4,5]))),be=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.q),__vite__mapDeps([0,1,2,3,4,5]))),we=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.r),__vite__mapDeps([0,1,2,3,4,5]))),Ee=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.s),__vite__mapDeps([0,1,2,3,4,5]))),Ie=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.W),__vite__mapDeps([0,1,2,3,4,5]))),Ne=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.t),__vite__mapDeps([0,1,2,3,4,5]))),ze=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.u),__vite__mapDeps([0,1,2,3,4,5]))),Le=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.T),__vite__mapDeps([0,1,2,3,4,5]))),Pe=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.v),__vite__mapDeps([0,1,2,3,4,5]))),Te=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.w),__vite__mapDeps([0,1,2,3,4,5]))),Ae=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.I),__vite__mapDeps([0,1,2,3,4,5]))),Re=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.R),__vite__mapDeps([0,1,2,3,4,5]))),De=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.x),__vite__mapDeps([0,1,2,3,4,5]))),Ve=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.y),__vite__mapDeps([0,1,2,3,4,5]))),Oe=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.z),__vite__mapDeps([0,1,2,3,4,5]))),ke=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.B),__vite__mapDeps([0,1,2,3,4,5]))),Ce=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.F),__vite__mapDeps([0,1,2,3,4,5]))),Se=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.G),__vite__mapDeps([0,1,2,3,4,5]))),$e=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.H),__vite__mapDeps([0,1,2,3,4,5]))),Me=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.J),__vite__mapDeps([0,1,2,3,4,5]))),Be=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.K),__vite__mapDeps([0,1,2,3,4,5]))),Fe=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.L),__vite__mapDeps([0,1,2,3,4,5]))),We=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.N),__vite__mapDeps([0,1,2,3,4,5]))),qe=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.O),__vite__mapDeps([0,1,2,3,4,5]))),He=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.Q),__vite__mapDeps([0,1,2,3,4,5]))),Je=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.V),__vite__mapDeps([0,1,2,3,4,5]))),Ke=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.X),__vite__mapDeps([0,1,2,3,4,5]))),Ge=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.Y),__vite__mapDeps([0,1,2,3,4,5]))),Ue=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.Z),__vite__mapDeps([0,1,2,3,4,5]))),Ye=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.$),__vite__mapDeps([0,1,2,3,4,5]))),Xe=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.a0),__vite__mapDeps([0,1,2,3,4,5]))),Qe=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.a1),__vite__mapDeps([0,1,2,3,4,5]))),Ze=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.a2),__vite__mapDeps([0,1,2,3,4,5]))),et=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.a3),__vite__mapDeps([0,1,2,3,4,5]))),tt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.a4),__vite__mapDeps([0,1,2,3,4,5]))),st=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.a5),__vite__mapDeps([0,1,2,3,4,5]))),at=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.a6),__vite__mapDeps([0,1,2,3,4,5]))),nt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.a7),__vite__mapDeps([0,1,2,3,4,5]))),rt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.a8),__vite__mapDeps([0,1,2,3,4,5]))),lt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.a9),__vite__mapDeps([0,1,2,3,4,5]))),it=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.aa),__vite__mapDeps([0,1,2,3,4,5]))),ct=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.ab),__vite__mapDeps([0,1,2,3,4,5]))),ot=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.ac),__vite__mapDeps([0,1,2,3,4,5]))),ht=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.ad),__vite__mapDeps([0,1,2,3,4,5]))),dt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.ae),__vite__mapDeps([0,1,2,3,4,5]))),xt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.af),__vite__mapDeps([0,1,2,3,4,5]))),mt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.ag),__vite__mapDeps([0,1,2,3,4,5]))),jt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.ah),__vite__mapDeps([0,1,2,3,4,5]))),pt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.ai),__vite__mapDeps([0,1,2,3,4,5]))),ut=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.aj),__vite__mapDeps([0,1,2,3,4,5]))),_t=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.ak),__vite__mapDeps([0,1,2,3,4,5]))),gt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.al),__vite__mapDeps([0,1,2,3,4,5]))),ft=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.am),__vite__mapDeps([0,1,2,3,4,5]))),yt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.an),__vite__mapDeps([0,1,2,3,4,5]))),vt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.ao),__vite__mapDeps([0,1,2,3,4,5]))),bt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.ap),__vite__mapDeps([0,1,2,3,4,5]))),wt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.aq),__vite__mapDeps([0,1,2,3,4,5]))),Et=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.ar),__vite__mapDeps([0,1,2,3,4,5]))),It=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.as),__vite__mapDeps([0,1,2,3,4,5]))),Nt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.at),__vite__mapDeps([0,1,2,3,4,5]))),zt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.au),__vite__mapDeps([0,1,2,3,4,5]))),Lt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.av),__vite__mapDeps([0,1,2,3,4,5]))),Pt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.aw),__vite__mapDeps([0,1,2,3,4,5]))),Tt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.ax),__vite__mapDeps([0,1,2,3,4,5]))),At=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.ay),__vite__mapDeps([0,1,2,3,4,5]))),Rt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.az),__vite__mapDeps([0,1,2,3,4,5]))),Dt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.aA),__vite__mapDeps([0,1,2,3,4,5]))),Vt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.aB),__vite__mapDeps([0,1,2,3,4,5]))),Ot=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.aC),__vite__mapDeps([0,1,2,3,4,5]))),kt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.aD),__vite__mapDeps([0,1,2,3,4,5]))),Ct=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.aE),__vite__mapDeps([0,1,2,3,4,5]))),St=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.aF),__vite__mapDeps([0,1,2,3,4,5]))),$t=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.aG),__vite__mapDeps([0,1,2,3,4,5]))),Mt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.aH),__vite__mapDeps([0,1,2,3,4,5]))),Bt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.aI),__vite__mapDeps([0,1,2,3,4,5]))),Ft=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.aJ),__vite__mapDeps([0,1,2,3,4,5]))),Wt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.aK),__vite__mapDeps([0,1,2,3,4,5]))),qt=s.lazy(()=>g(()=>import("./pages-Cx-zzNcQ.js").then(e=>e.aL),__vite__mapDeps([0,1,2,3,4,5]))),Ht=()=>{const e=W();return e.currentSong?a.jsx(Z,{isPlaying:e.isPlaying,currentSong:e.currentSong,onPlayPause:e.togglePlay,onNext:e.next,onPrevious:e.previous,currentTime:e.currentTime,duration:e.duration}):null},Jt=({children:e})=>a.jsx(se,{children:a.jsx(s.Suspense,{fallback:a.jsx(le,{}),children:e})});function Kt(){return s.useEffect(()=>{},[]),s.useEffect(()=>{(async()=>{try{const e=localStorage.getItem("custom_fonts");if(!e)return;const t=JSON.parse(e),s=new Set;document.fonts.forEach(e=>{e.family&&s.add(e.family)});const a=t.map(async e=>{try{if(s.has(e.fontFamily))return!0;const t=new FontFace(e.fontFamily,`url(${e.url})`,{display:"swap"});return await t.load(),document.fonts.add(t),s.add(e.fontFamily),!0}catch(t){return!1}});await Promise.all(a);const n=localStorage.getItem("chat_font_family_value"),r=localStorage.getItem("chat_font_family");n&&"system"!==r&&document.documentElement.style.setProperty("--chat-font-family",n)}catch(e){}})()},[]),a.jsx(se,{children:a.jsx(L,{children:a.jsx(P,{children:a.jsx(T,{children:a.jsx(A,{children:a.jsx(R,{children:a.jsx(D,{children:a.jsx(V,{children:a.jsx(O,{children:a.jsx(k,{children:a.jsx(C,{children:a.jsx(S,{children:a.jsx($,{children:a.jsx(M,{children:a.jsx(B,{children:a.jsx(F,{children:a.jsxs(i,{basename:"/zhizhi/",children:[a.jsx(ae,{}),a.jsx(Ht,{}),a.jsx(Y,{}),a.jsx(X,{}),a.jsx(Q,{}),a.jsx(re,{}),a.jsx(te,{children:a.jsxs(c,{children:[a.jsxs(o,{path:"/wechat",element:a.jsx(ee,{}),children:[a.jsx(o,{index:!0,element:a.jsx(f,{})}),a.jsx(o,{path:"contacts",element:a.jsx(y,{})}),a.jsx(o,{path:"discover",element:a.jsx(v,{})}),a.jsx(o,{path:"me",element:a.jsx(b,{})})]}),a.jsx(o,{path:"/chat/:id",element:a.jsx(Jt,{children:a.jsx(ce,{})})}),a.jsx(o,{path:"/settings",element:a.jsx(Jt,{children:a.jsx(he,{})})}),a.jsx(o,{path:"/settings-new",element:a.jsx(Jt,{children:a.jsx(Pt,{})})}),a.jsx(o,{path:"/profile/:id",element:a.jsx(Jt,{children:a.jsx(de,{})})}),a.jsx(o,{path:"/edit-profile",element:a.jsx(Jt,{children:a.jsx(ye,{})})}),a.jsx(o,{path:"/users",element:a.jsx(Jt,{children:a.jsx(ve,{})})}),a.jsx(o,{path:"/create-user",element:a.jsx(Jt,{children:a.jsx(be,{})})}),a.jsx(o,{path:"/create-character",element:a.jsx(Jt,{children:a.jsx(me,{})})}),a.jsx(o,{path:"/api-config",element:a.jsx(Jt,{children:a.jsx(ue,{})})}),a.jsx(o,{path:"/api-list",element:a.jsx(Jt,{children:a.jsx(_e,{})})}),a.jsx(o,{path:"/add-api",element:a.jsx(Jt,{children:a.jsx(ge,{})})}),a.jsx(o,{path:"/edit-api/:id",element:a.jsx(Jt,{children:a.jsx(fe,{})})}),a.jsx(o,{path:"/wechat/api-config",element:a.jsx(Jt,{children:a.jsx(ue,{})})}),a.jsx(o,{path:"/wechat/api-list",element:a.jsx(Jt,{children:a.jsx(_e,{})})}),a.jsx(o,{path:"/wechat/add-api",element:a.jsx(Jt,{children:a.jsx(ge,{})})}),a.jsx(o,{path:"/wechat/edit-api/:id",element:a.jsx(Jt,{children:a.jsx(fe,{})})}),a.jsx(o,{path:"/character/:id",element:a.jsx(Jt,{children:a.jsx(pe,{})})}),a.jsx(o,{path:"/edit-character/:id",element:a.jsx(Jt,{children:a.jsx(je,{})})}),a.jsx(o,{path:"/moments",element:a.jsx(Jt,{children:a.jsx(oe,{})})}),a.jsx(o,{path:"/publish-moment",element:a.jsx(Jt,{children:a.jsx(we,{})})}),a.jsx(o,{path:"/moment-notifications",element:a.jsx(Jt,{children:a.jsx(Ee,{})})}),a.jsx(o,{path:"/wechat/moments",element:a.jsx(Jt,{children:a.jsx(oe,{})})}),a.jsx(o,{path:"/send-transfer/:id",element:a.jsx(Jt,{children:a.jsx(Ne,{})})}),a.jsx(o,{path:"/chat-settings/:id",element:a.jsx(Jt,{children:a.jsx(xe,{})})}),a.jsx(o,{path:"/memory/:characterId",element:a.jsx(Jt,{children:a.jsx(Ve,{})})}),a.jsx(o,{path:"/memory-summary/:characterId",element:a.jsx(Jt,{children:a.jsx(Oe,{})})}),a.jsx(o,{path:"/wallet",element:a.jsx(Jt,{children:a.jsx(Ie,{})})}),a.jsx(o,{path:"/services",element:a.jsx(Jt,{children:a.jsx(ze,{})})}),a.jsx(o,{path:"/transaction-history",element:a.jsx(Jt,{children:a.jsx(Le,{})})}),a.jsx(o,{path:"/card-wallet",element:a.jsx(Jt,{children:a.jsx(Pe,{})})}),a.jsx(o,{path:"/create-intimate-pay/:characterId",element:a.jsx(Jt,{children:a.jsx(Te,{})})}),a.jsx(o,{path:"/intimate-pay/:characterId",element:a.jsx(Jt,{children:a.jsx(Ae,{})})}),a.jsx(o,{path:"/intimate-pay/receive/:characterId/:monthlyLimit",element:a.jsx(Jt,{children:a.jsx(Re,{})})}),a.jsx(o,{path:"/wallet-help",element:a.jsx(Jt,{children:a.jsx(De,{})})}),a.jsx(o,{path:"/diary/:characterId",element:a.jsx(Jt,{children:a.jsx(Ce,{})})}),a.jsx(o,{path:"/streak/:characterId",element:a.jsx(Jt,{children:a.jsx(Se,{})})}),a.jsx(o,{path:"/about",element:a.jsx(Jt,{children:a.jsx(Tt,{})})}),a.jsx(o,{path:"/accounting",element:a.jsx(Jt,{children:a.jsx(Me,{})})}),a.jsx(o,{path:"/accounting-chat",element:a.jsx(Jt,{children:a.jsx(Be,{})})}),a.jsx(o,{path:"/add-transaction",element:a.jsx(Jt,{children:a.jsx(Fe,{})})}),a.jsx(o,{path:"/groups",element:a.jsx(Jt,{children:a.jsx(We,{})})}),a.jsx(o,{path:"/create-group",element:a.jsx(Jt,{children:a.jsx(qe,{})})}),a.jsx(o,{path:"/group/:id",element:a.jsx(Jt,{children:a.jsx(He,{})})}),a.jsx(o,{path:"/group-settings/:id",element:a.jsx(Jt,{children:a.jsx(Je,{})})}),a.jsx(o,{path:"/shake-shake",element:a.jsx(Jt,{children:a.jsx(Ke,{})})}),a.jsx(o,{path:"/live",element:a.jsx(Jt,{children:a.jsx(Ge,{})})}),a.jsx(o,{path:"/live-room/:id",element:a.jsx(Jt,{children:a.jsx(Ue,{})})}),a.jsx(o,{path:"/couple-space",element:a.jsx(Jt,{children:a.jsx(Ye,{})})}),a.jsx(o,{path:"/couple-space/:characterId",element:a.jsx(Jt,{children:a.jsx(Ye,{})})}),a.jsx(o,{path:"/couple-album",element:a.jsx(Jt,{children:a.jsx(Xe,{})})}),a.jsx(o,{path:"/couple-anniversary",element:a.jsx(Jt,{children:a.jsx(Qe,{})})}),a.jsx(o,{path:"/couple-message-board",element:a.jsx(Jt,{children:a.jsx(Ze,{})})}),a.jsx(o,{path:"/calendar",element:a.jsx(Jt,{children:a.jsx(et,{})})}),a.jsx(o,{path:"/ai-footprint",element:a.jsx(Jt,{children:a.jsx(tt,{})})}),a.jsx(o,{path:"/ai-footprint/:characterId",element:a.jsx(Jt,{children:a.jsx(tt,{})})}),a.jsx(o,{path:"/life-settings/:characterId",element:a.jsx(Jt,{children:a.jsx(Nt,{})})}),a.jsx(o,{path:"/spark-moments",element:a.jsx(Jt,{children:a.jsx($e,{})})}),a.jsx(o,{path:"/memes-library",element:a.jsx(Jt,{children:a.jsx(st,{})})}),a.jsx(o,{path:"/mini-programs",element:a.jsx(Jt,{children:a.jsx(Lt,{})})}),a.jsx(o,{path:"/bubble-store",element:a.jsx(Jt,{children:a.jsx(at,{})})}),a.jsx(o,{path:"/font-customizer",element:a.jsx(Jt,{children:a.jsx(nt,{})})}),a.jsx(o,{path:"/icon-customizer",element:a.jsx(Jt,{children:a.jsx(rt,{})})}),a.jsx(o,{path:"/background-customizer",element:a.jsx(Jt,{children:a.jsx(lt,{})})}),a.jsx(o,{path:"/weather-detail",element:a.jsx(Jt,{children:a.jsx(it,{})})}),a.jsx(o,{path:"/music-player",element:a.jsx(Jt,{children:a.jsx(ct,{})})}),a.jsx(o,{path:"/upload-song",element:a.jsx(Jt,{children:a.jsx(ot,{})})}),a.jsx(o,{path:"/music-search",element:a.jsx(Jt,{children:a.jsx(dt,{})})}),a.jsx(o,{path:"/music-together-chat",element:a.jsx(Jt,{children:a.jsx(xt,{})})}),a.jsx(o,{path:"/music-invite-demo",element:a.jsx(Jt,{children:a.jsx(mt,{})})}),a.jsx(o,{path:"/game/gomoku/:characterId",element:a.jsx(Jt,{children:a.jsx(jt,{})})}),a.jsx(o,{path:"/game/character-select",element:a.jsx(Jt,{children:a.jsx(pt,{})})}),a.jsx(o,{path:"/game-list",element:a.jsx(Jt,{children:a.jsx(ut,{})})}),a.jsx(o,{path:"/game/undercover/:groupId",element:a.jsx(Jt,{children:a.jsx(_t,{})})}),a.jsx(o,{path:"/desktop",element:a.jsx(Jt,{children:a.jsx(gt,{})})}),a.jsx(o,{path:"/story-mode/:characterId",element:a.jsx(Jt,{children:a.jsx(ft,{})})}),a.jsx(o,{path:"/preset",element:a.jsx(Jt,{children:a.jsx(bt,{})})}),a.jsx(o,{path:"/offline-chat",element:a.jsx(Jt,{children:a.jsx(wt,{})})}),a.jsx(o,{path:"/customize",element:a.jsx(Jt,{children:a.jsx(Et,{})})}),a.jsx(o,{path:"/statusbar-customize",element:a.jsx(Jt,{children:a.jsx(It,{})})}),a.jsx(o,{path:"/worldbook",element:a.jsx(Jt,{children:a.jsx(yt,{})})}),a.jsx(o,{path:"/world-book",element:a.jsx(Jt,{children:a.jsx(yt,{})})}),a.jsx(o,{path:"/edit-world-book/:id",element:a.jsx(Jt,{children:a.jsx(vt,{})})}),a.jsx(o,{path:"/memory-cleanup",element:a.jsx(Jt,{children:a.jsx(ke,{})})}),a.jsx(o,{path:"/storage-migration",element:a.jsx(Jt,{children:a.jsx(zt,{})})}),a.jsx(o,{path:"/ai-phone-select",element:a.jsx(Jt,{children:a.jsx(ht,{})})}),a.jsx(o,{path:"/forum",element:a.jsx(Jt,{children:a.jsx(At,{})})}),a.jsx(o,{path:"/forum/welcome",element:a.jsx(Jt,{children:a.jsx(Rt,{})})}),a.jsx(o,{path:"/forum/initialize",element:a.jsx(Jt,{children:a.jsx(Dt,{})})}),a.jsx(o,{path:"/forum/character-list",element:a.jsx(Jt,{children:a.jsx(Vt,{})})}),a.jsx(o,{path:"/forum/publish",element:a.jsx(Jt,{children:a.jsx(Ot,{})})}),a.jsx(o,{path:"/forum/post/:id",element:a.jsx(Jt,{children:a.jsx(kt,{})})}),a.jsx(o,{path:"/forum/search",element:a.jsx(Jt,{children:a.jsx(Ct,{})})}),a.jsx(o,{path:"/forum/topics",element:a.jsx(Jt,{children:a.jsx(St,{})})}),a.jsx(o,{path:"/forum/create-topic",element:a.jsx(Jt,{children:a.jsx($t,{})})}),a.jsx(o,{path:"/forum/topic/:id",element:a.jsx(Jt,{children:a.jsx(Mt,{})})}),a.jsx(o,{path:"/forum/notifications",element:a.jsx(Jt,{children:a.jsx(Bt,{})})}),a.jsx(o,{path:"/forum/profile",element:a.jsx(Jt,{children:a.jsx(Ft,{})})}),a.jsx(o,{path:"/forum/user/:userId",element:a.jsx(Jt,{children:a.jsx(Wt,{})})}),a.jsx(o,{path:"/forum/memes",element:a.jsx(Jt,{children:a.jsx(qt,{})})}),a.jsx(o,{path:"/",element:a.jsx(Jt,{children:a.jsx(gt,{})})})]})})]})})})})})})})})})})})})})})})})})}h.createRoot(document.getElementById("root")).render(a.jsx(d.StrictMode,{children:a.jsx(Kt,{})}));
