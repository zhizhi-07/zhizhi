# AI记账功能说明

## 功能概述

全新的AI聊天记账功能已经集成到微信界面中！**小账**是一个温柔细心的AI记账助手，TA不仅能帮你记账，还能像朋友一样和你聊天。你可以通过自然语言与TA交流，TA会自动识别金额、分类并记录账单。

## 核心特点

### 🤖 功能性AI角色
- **小账**是一个功能性AI，专门负责记账
- 不会出现在通讯录中，只能通过"记账本"功能访问
- 可以正常聊天，像朋友一样交流，但本质是帮你记账
- 支持修改人设，自定义TA的性格和说话方式
- 使用真实的AI API进行对话，回复更自然

## 功能特点

### 1. 智能识别 🤖
- **自动提取金额**：支持多种表达方式
  - "买了一杯奶茶20元"
  - "午餐花了35块"
  - "打车回家15元"
  - "¥50买了本书"
  
- **智能分类**：AI会根据关键词自动分类
  - 🍔 餐饮：吃、喝、餐、饭、奶茶、咖啡、外卖等
  - 🚗 交通：打车、出租、地铁、公交、滴滴等
  - 🛍️ 购物：买、购、衣服、鞋、包等
  - 🎮 娱乐：电影、游戏、唱歌、KTV等
  - 💊 医疗：药、医院、看病、体检等
  - 📚 教育：书、课程、培训等
  - 🏠 住房：房租、物业
  - 💡 水电：水费、电费、网费、话费
  - 📝 其他：未匹配的消费

### 2. 使用方式

#### 访问小账
1. 点击底部"发现"
2. 点击"记账本"
3. 点击"AI记账"按钮
4. 自动跳转到与小账的聊天页面

**注意**：小账不会出现在通讯录中，只能通过记账本功能访问。

#### 聊天记账（推荐）✨
- 像和朋友聊天一样告诉小账你的消费
- 小账会自动识别金额和分类
- 系统自动记录到账单中
- 可以正常聊天，不只是记账

#### 手动记账
1. 在记账本主页点击右下角"+"按钮
2. 选择支出/收入
3. 输入金额、选择分类、添加备注
4. 完成记录

### 3. 账单管理 📊

#### 月度统计
- 显示当月收入、支出和结余
- 美观的渐变卡片展示
- 一目了然的财务状况

#### 账单列表
- 按日期分组显示
- 支持查看历史记录
- 每条账单显示：
  - 分类图标和名称
  - 消费描述
  - 金额（支出红色，收入绿色）

### 4. 数据存储 💾
- 所有账单数据保存在本地 localStorage
- 数据持久化，刷新页面不丢失
- 支持删除和修改（功能预留）

## 使用示例

### 示例对话

**你**: 买了一杯奶茶20元

**小账**: 好的，已经帮你记录了！🍔 餐饮 ¥20.00，备注：买了一杯奶茶。今天喝奶茶啦～

*（系统自动记录到账单中）*

---

**你**: 今天心情不太好

**小账**: 怎么啦？发生什么事了吗？跟我说说吧～

*（可以正常聊天，不只是记账）*

---

**你**: 打车回家花了15块

**小账**: 好的！🚗 交通 ¥15.00，备注：打车回家。记得注意安全哦～

*（系统自动记录到账单中）*

## 技术实现

### 核心组件
- `AccountingContext.tsx` - 账单数据管理
- `Accounting.tsx` - 记账本主页
- `AccountingChat.tsx` - AI聊天记账页面
- `AddTransaction.tsx` - 手动添加账单页面

### 数据结构
```typescript
interface Transaction {
  id: string
  type: 'expense' | 'income'
  category: string
  amount: number
  description: string
  date: string
  createdAt: string
  aiExtracted?: boolean // 标记是否由AI提取
}
```

### AI识别逻辑
- 基于规则的关键词匹配
- 支持多种金额表达格式
- 智能分类系统
- 自动生成描述

## 未来扩展

### 计划功能
1. **统计图表** 📈
   - 月度支出趋势
   - 分类占比饼图
   - 年度对比

2. **预算管理** 💰
   - 设置月度预算
   - 超支提醒
   - 分类预算

3. **导出功能** 📤
   - 导出Excel
   - 生成PDF报表
   - 数据备份

4. **更智能的AI** 🧠
   - 接入真实AI API
   - 更准确的分类
   - 消费建议

5. **账单编辑** ✏️
   - 修改已有账单
   - 批量删除
   - 账单搜索

## 使用建议

1. **养成记账习惯**：每次消费后立即记录
2. **使用AI记账**：更快速、更自然
3. **定期查看统计**：了解消费习惯
4. **合理分类**：便于后续分析

## 注意事项

- 当前AI识别基于本地规则，无需网络
- 数据仅保存在本地浏览器
- 清除浏览器数据会丢失记录
- 建议定期导出备份（功能开发中）

## 修改人设

如果你想修改小账的性格：

1. 进入与小账的聊天页面
2. 点击右上角"..."菜单
3. 选择"聊天设置"
4. 修改角色描述
5. 自定义小账的性格、说话方式等

**提示**：描述中应该写性格特点，比如"温柔"、"活泼"、"严肃"等，而不是功能说明。

---

**开始使用**: 发现 → 记账本 → AI记账

祝你记账愉快！💰✨
