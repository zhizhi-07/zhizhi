# AI记账功能说明（最终版）

## 功能概述

**小账**是一个功能性AI记账助手，专门负责帮你记账。TA温柔细心，可以像朋友一样聊天，但本质是通过AI识别你的消费并自动记录。

## 核心特点

### 🤖 AI智能识别
- **真正的AI识别**：使用AI API来理解你的消息
- **自动记录账单**：AI识别到消费后自动保存
- **自然对话**：可以正常聊天，不只是记账工具
- **功能性角色**：不在通讯录中，只能通过记账本访问

### 💡 工作原理

```
用户："买了一杯奶茶20元"
  ↓
1. 消息发送给AI
  ↓
2. AI理解并回复："好的，已经帮你记录了！餐饮20元..."
  ↓
3. AI在回复中添加隐藏标记：[BILL:expense|20|food|买了一杯奶茶]
  ↓
4. 系统提取标记并自动保存到账单
  ↓
5. 用户看到的是正常的聊天回复（看不到标记）
```

## 使用方式

### 访问小账
1. 点击底部"发现"
2. 点击"记账本"
3. 点击"AI记账"按钮
4. 自动跳转到与小账的聊天页面

**注意**：小账不会出现在通讯录中，只能通过记账本功能访问。

### 聊天记账
直接告诉小账你的消费或收入：

**支出示例**：
- "买了一杯奶茶20元"
- "打车回家花了15块"
- "午餐35元"
- "买了件衣服199"

**收入示例**：
- "发工资了5000"
- "收到奖金1000元"
- "投资赚了500"

**正常聊天**：
- "今天心情不太好"
- "你在干嘛呢"
- "最近好累啊"

AI会自动判断是否需要记账，正常聊天不会记录账单。

## AI识别的分类

### 支出分类
- 🍔 **food** - 餐饮：吃、喝、餐、饭、奶茶、咖啡、外卖等
- 🚗 **transport** - 交通：打车、出租、地铁、公交、滴滴等
- 🛍️ **shopping** - 购物：买、购、衣服、鞋、包等
- 🎮 **entertainment** - 娱乐：电影、游戏、唱歌、KTV等
- 💊 **health** - 医疗：药、医院、看病、体检、健身
- 📚 **education** - 教育：书、课程、培训、学费
- 🏠 **housing** - 住房：房租、物业
- 💡 **utilities** - 水电：水费、电费、网费、话费
- 📝 **other** - 其他：未匹配的消费

### 收入分类
- 💰 **salary** - 工资
- 🎁 **bonus** - 奖金
- 📈 **investment** - 投资
- 💵 **other** - 其他

## 示例对话

### 记账对话

**你**：买了一杯奶茶20元

**小账**：好的，已经帮你记录了！餐饮消费20元，备注：买了一杯奶茶。今天喝奶茶啦～

*（系统自动记录：支出 | 20元 | 餐饮 | 买了一杯奶茶）*

---

**你**：打车回家花了15块

**小账**：好的！交通15元已记录。记得注意安全哦～

*（系统自动记录：支出 | 15元 | 交通 | 打车回家）*

---

**你**：发工资了5000

**小账**：恭喜恭喜！工资5000元已记录～这个月要好好规划哦

*（系统自动记录：收入 | 5000元 | 工资 | 工资）*

### 正常聊天

**你**：今天心情不太好

**小账**：怎么啦？发生什么事了吗？跟我说说吧～

*（不会记录账单，正常聊天）*

---

**你**：你在干嘛呢

**小账**：在这里等你呀～有什么想聊的吗？

*（不会记录账单，正常聊天）*

## 修改人设

如果你想修改小账的性格：

1. 进入与小账的聊天页面
2. 点击右上角"..."菜单
3. 选择"聊天设置"
4. 点击"编辑角色"
5. 修改"角色描述"

**提示**：
- 描述中应该写性格特点，比如"温柔"、"活泼"、"严肃"、"幽默"等
- 不要写功能性说明，AI会自动知道要记账
- 可以自定义说话风格、语气等

**示例人设**：
```
你是小账，一个活泼开朗的人。

性格：活泼可爱、热情开朗、偶尔会调皮、喜欢用可爱的语气说话

对话风格：语气轻松活泼、经常用"哒"、"呀"、"啦"等语气词、回复简短有趣
```

## 技术实现

### AI提示词格式
AI在识别到消费或收入时，会在回复末尾添加隐藏标记：
```
[BILL:类型|金额|分类|描述]
```

例如：
```
好的，已经帮你记录了！餐饮20元～[BILL:expense|20|food|买了一杯奶茶]
```

用户看到的只是："好的，已经帮你记录了！餐饮20元～"

系统会自动提取 `[BILL:...]` 标记并保存账单，然后移除标记显示给用户。

### 数据流程
1. 用户发送消息
2. 消息发送给AI API
3. AI理解并生成回复（包含隐藏标记）
4. 系统提取标记并保存账单
5. 移除标记后显示给用户

## 优势

### vs 关键词识别
- ✅ **更智能**：AI理解语义，不只是匹配关键词
- ✅ **更准确**：AI能理解复杂表达
- ✅ **更自然**：可以正常聊天，不需要特定格式

### vs 纯手动记账
- ✅ **更快速**：聊天即记账，无需填表单
- ✅ **更有趣**：像和朋友聊天一样
- ✅ **更贴心**：AI会关心你的消费习惯

## 注意事项

- 需要配置AI API才能使用（在设置中配置）
- 数据保存在本地浏览器
- 清除浏览器数据会丢失记录
- 建议定期导出备份（功能开发中）

## 开始使用

**发现 → 记账本 → AI记账**

祝你记账愉快！💰✨
