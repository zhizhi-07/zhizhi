# AI抢答问题修复说明

## 问题描述

AI讲完笑话后，自己说"...不好笑吗 那我再想一个"，这是在**抢答**，没有等用户回应就自己评价了。

### 问题示例

```
AI: 别叹气啦 我给你讲个笑话
AI: 有个人去面试
AI: 考官问"你最大的优点是什么"
AI: 他说"我诚实"
AI: 考官"我不信"
AI: 他说"你看 我说对了吧"
AI: ...不好笑吗 那我再想一个
     ↑ 抢答了！没等用户说话！
```

## 问题分析

这种行为违反了真实对话的节奏：

### 错误行为
1. ❌ 讲完笑话后自己问"不好笑吗"
2. ❌ 没等对方回应就自己决定"那我再想一个"
3. ❌ 替对方决定了感受（觉得不好笑）
4. ❌ 不给对方说话的空间

### 真实对话应该是
1. ✅ AI讲完笑话
2. ✅ 等用户回应（笑、评价、或者沉默）
3. ✅ 根据用户的反应再决定下一步

## 类似的抢答问题

### 示例1：发表情包后自己评价
❌ 错误：
```
AI: [表情包:哈哈哈]
AI: 好像不太合适
AI: 算了
```

✅ 正确：
```
AI: [表情包:哈哈哈]
（等用户反应）
```

### 示例2：分享事情后自己评价
❌ 错误：
```
AI: 今天遇到个好玩的事
AI: （讲事情）
AI: 是不是很有意思
AI: 你肯定觉得好笑吧
```

✅ 正确：
```
AI: 今天遇到个好玩的事
AI: （讲事情）
（等用户说有不有意思）
```

### 示例3：提建议后自己否定
❌ 错误：
```
AI: 要不我们去看电影吧
AI: 算了你可能不想去
AI: 那就在家吧
```

✅ 正确：
```
AI: 要不我们去看电影吧
（等用户说想不想去）
```

## 修复方案

在系统提示词中添加"对话节奏"规则，明确要求AI：
1. 做完一件事后，等对方回应
2. 不要自问自答
3. 不要替对方决定感受
4. 给对方说话的空间

### 新增规则

```
🔴🔴🔴 对话节奏 - 不要抢答！🔴🔴🔴

等对方回应，不要自问自答！

❌ 错误示例：
讲完笑话后说："...不好笑吗 那我再想一个" ← 抢答了！没等对方说话！

✅ 正确示例：
讲完笑话后就停下，等对方说好不好笑

重要原则：
• 做完一件事（讲笑话、发表情包、分享事情）后，等对方回应
• 不要自己问"好不好笑"、"对不对"、"是不是"然后自己回答
• 不要替对方决定感受："你肯定xxx"、"你应该xxx"
• 给对方说话的空间，不要一直自己说个不停
• 真人对话是你来我往，不是一个人的独角戏
```

### 禁止项

在"绝对禁止"部分添加：
- ❌ 抢答和自问自答：讲完笑话后说"不好笑吗"、做完事后自己评价"好像不太好"
- ❌ 替对方决定感受：不要说"你肯定觉得xxx"、"你应该xxx"，等对方自己说

## 对比示例

### 修复前（错误）

```
AI: 别叹气啦 我给你讲个笑话
AI: 有个人去面试
AI: 考官问"你最大的优点是什么"
AI: 他说"我诚实"
AI: 考官"我不信"
AI: 他说"你看 我说对了吧"
AI: ...不好笑吗 那我再想一个
```

### 修复后（正确）

```
AI: 别叹气啦
AI: 听我给你讲个笑话
AI: 有个人去面试
AI: 考官问"你最大的优点是什么"
AI: 他说"我诚实"
AI: 考官"我不信"
AI: 他说"你看 我说对了吧"
（等用户回应）

用户: 哈哈哈笑死
AI: 嘿嘿
AI: 开心点嘛
```

## 核心原则

### 对话是双向的
- 你说一句，我说一句
- 不是一个人的独角戏
- 给对方说话的机会

### 等待反馈
- 做完一件事，等对方反应
- 不要自己评价自己
- 不要替对方决定感受

### 尊重对方
- 对方有权利说好或不好
- 对方有权利选择回应或不回应
- 不要强迫对方必须有某种反应

## 修改文件

- **`src/utils/prompts.ts`**：
  - 添加"对话节奏"规则
  - 添加禁止抢答和自问自答的禁止项

## 修复时间

2025年10月19日

---

## 真实对话的节奏

真人聊天：
1. 我讲个笑话
2. （等你笑或者说话）
3. 根据你的反应继续

AI之前的错误：
1. 我讲个笑话
2. 不好笑吗？（自己问）
3. 那我再想一个（自己答）
4. （完全没给你说话的机会）

这就是问题所在。
