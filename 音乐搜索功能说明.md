# 音乐搜索功能使用说明

## 功能概述

已成功实现混合音乐搜索功能，支持**本地歌曲搜索**和**在线歌曲搜索**。

## 主要特性

### ✅ 本地搜索
- 搜索已上传的自定义歌曲
- 搜索默认内置歌曲
- 支持按歌曲名、歌手名、专辑名搜索
- 实时模糊匹配

### ✅ 在线搜索
- 集成网易云音乐API
- 支持搜索海量在线歌曲
- 显示歌曲版权状态（免费/VIP/付费）
- 自动获取歌词
- 可添加到本地播放列表

### ✅ 智能功能
- 搜索历史记录（保存最近10条）
- 快速重复搜索
- 一键清除历史
- 分标签显示搜索结果
- 在线歌曲一键添加到本地

## 使用方法

### 1. 进入搜索页面
在音乐播放器页面，点击顶部导航栏的**搜索图标**（放大镜）

### 2. 搜索歌曲
- 在搜索框输入关键词（歌曲名/歌手名）
- 点击"搜索"按钮或按Enter键
- 系统会同时搜索本地和在线歌曲

### 3. 查看结果
- **本地歌曲**标签：显示本地匹配的歌曲
- **在线歌曲**标签：显示网易云搜索结果

### 4. 播放歌曲
- **本地歌曲**：直接点击即可播放
- **在线歌曲**：点击后自动获取播放链接并播放

### 5. 添加到本地（仅在线歌曲）
点击在线歌曲右侧的"+"按钮，将歌曲添加到本地播放列表

## 技术实现

### 文件结构
```
src/
├── pages/
│   ├── MusicSearch.tsx          # 搜索页面
│   └── MusicPlayer.tsx           # 播放器页面（已添加搜索入口）
├── services/
│   └── musicApi.ts               # 音乐API服务
└── App.tsx                       # 路由配置
```

### API说明
```typescript
// 搜索歌曲
searchOnlineMusic(keyword: string, limit?: number)

// 获取播放URL
getSongUrl(id: number)

// 获取歌词
getLyric(id: number)
```

## 注意事项

### ⚠️ 版权限制
- 部分在线歌曲可能有版权保护
- VIP/付费歌曲会显示标识，无法播放
- 建议优先播放免费歌曲

### ⚠️ 网络要求
- 在线搜索需要网络连接
- 网易云API可能需要特殊网络环境
- 如果在线搜索失败，请检查网络设置

### ⚠️ API稳定性
- 使用的是网易云公开API
- 可能会因网易云策略调整而失效
- 建议将喜欢的在线歌曲添加到本地

## 未来优化方向

1. **多平台支持**
   - QQ音乐
   - 酷狗音乐
   - 酷我音乐

2. **功能增强**
   - 歌单导入
   - 批量下载
   - 歌曲推荐
   - 智能匹配歌词

3. **用户体验**
   - 搜索联想
   - 热门搜索
   - 搜索排行榜
   - 离线缓存

## 常见问题

### Q1: 在线搜索没有结果？
**A:** 检查网络连接，或尝试更换关键词

### Q2: 无法播放在线歌曲？
**A:** 可能是版权限制或网络问题，请尝试其他歌曲

### Q3: 如何保存在线歌曲？
**A:** 点击歌曲右侧的"+"按钮添加到本地

### Q4: 搜索历史在哪里？
**A:** 进入搜索页面即可看到最近的搜索记录

## 反馈与支持

如遇到问题或有功能建议，欢迎反馈！
